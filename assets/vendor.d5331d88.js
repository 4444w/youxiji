function ei(t,e){const i=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)i[s[r]]=!0;return e?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const an="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ln=ei(an);function ss(t){return!!t||t===""}function ii(t){if(T(t)){const e={};for(let i=0;i<t.length;i++){const s=t[i],r=W(s)?cn(s):ii(s);if(r)for(const n in r)e[n]=r[n]}return e}else{if(W(t))return t;if(H(t))return t}}const fn=/;(?![^(]*\))/g,un=/:(.+)/;function cn(t){const e={};return t.split(fn).forEach(i=>{if(i){const s=i.split(un);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function si(t){let e="";if(W(t))e=t;else if(T(t))for(let i=0;i<t.length;i++){const s=si(t[i]);s&&(e+=s+" ")}else if(H(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function pn(t,e){if(t.length!==e.length)return!1;let i=!0;for(let s=0;i&&s<t.length;s++)i=Se(t[s],e[s]);return i}function Se(t,e){if(t===e)return!0;let i=hs(t),s=hs(e);if(i||s)return i&&s?t.getTime()===e.getTime():!1;if(i=T(t),s=T(e),i||s)return i&&s?pn(t,e):!1;if(i=H(t),s=H(e),i||s){if(!i||!s)return!1;const r=Object.keys(t).length,n=Object.keys(e).length;if(r!==n)return!1;for(const o in t){const h=t.hasOwnProperty(o),f=e.hasOwnProperty(o);if(h&&!f||!h&&f||!Se(t[o],e[o]))return!1}}return String(t)===String(e)}function mn(t,e){return t.findIndex(i=>Se(i,e))}const ca=t=>t==null?"":T(t)||H(t)&&(t.toString===as||!O(t.toString))?JSON.stringify(t,rs,2):String(t),rs=(t,e)=>e&&e.__v_isRef?rs(t,e.value):Ut(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[s,r])=>(i[`${s} =>`]=r,i),{})}:be(e)?{[`Set(${e.size})`]:[...e.values()]}:H(e)&&!T(e)&&!ne(e)?String(e):e,k={},Wt=[],ht=()=>{},dn=()=>!1,_n=/^on[^a-z]/,Ae=t=>_n.test(t),ri=t=>t.startsWith("onUpdate:"),j=Object.assign,ns=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},Rn=Object.prototype.hasOwnProperty,w=(t,e)=>Rn.call(t,e),T=Array.isArray,Ut=t=>Ce(t)==="[object Map]",be=t=>Ce(t)==="[object Set]",hs=t=>t instanceof Date,O=t=>typeof t=="function",W=t=>typeof t=="string",ni=t=>typeof t=="symbol",H=t=>t!==null&&typeof t=="object",os=t=>H(t)&&O(t.then)&&O(t.catch),as=Object.prototype.toString,Ce=t=>as.call(t),xn=t=>Ce(t).slice(8,-1),ne=t=>Ce(t)==="[object Object]",hi=t=>W(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ie=ei(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),De=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},gn=/-(\w)/g,ft=De(t=>t.replace(gn,(e,i)=>i?i.toUpperCase():"")),Sn=/\B([A-Z])/g,Zt=De(t=>t.replace(Sn,"-$1").toLowerCase()),Ee=De(t=>t.charAt(0).toUpperCase()+t.slice(1)),oi=De(t=>t?`on${Ee(t)}`:""),Ne=(t,e)=>!Object.is(t,e),Te=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},Oe=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},ls=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let fs;const An=()=>fs||(fs=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Nt;const Fe=[];class bn{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Nt&&(this.parent=Nt,this.index=(Nt.scopes||(Nt.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Fe.push(this),Nt=this)}off(){this.active&&(Fe.pop(),Nt=Fe[Fe.length-1])}stop(e){if(this.active){if(this.effects.forEach(i=>i.stop()),this.cleanups.forEach(i=>i()),this.scopes&&this.scopes.forEach(i=>i.stop(!0)),this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function Cn(t,e){e=e||Nt,e&&e.active&&e.effects.push(t)}const ai=t=>{const e=new Set(t);return e.w=0,e.n=0,e},us=t=>(t.w&At)>0,cs=t=>(t.n&At)>0,In=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=At},Dn=t=>{const{deps:e}=t;if(e.length){let i=0;for(let s=0;s<e.length;s++){const r=e[s];us(r)&&!cs(r)?r.delete(t):e[i++]=r,r.w&=~At,r.n&=~At}e.length=i}},li=new WeakMap;let he=0,At=1;const fi=30,oe=[];let Tt;const Ot=Symbol(""),ui=Symbol("");class ci{constructor(e,i=null,s){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],Cn(this,s)}run(){if(!this.active)return this.fn();if(!oe.includes(this))try{return oe.push(Tt=this),En(),At=1<<++he,he<=fi?In(this):ps(this),this.fn()}finally{he<=fi&&Dn(this),At=1<<--he,Ft(),oe.pop();const e=oe.length;Tt=e>0?oe[e-1]:void 0}}stop(){this.active&&(ps(this),this.onStop&&this.onStop(),this.active=!1)}}function ps(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let jt=!0;const pi=[];function Kt(){pi.push(jt),jt=!1}function En(){pi.push(jt),jt=!0}function Ft(){const t=pi.pop();jt=t===void 0?!0:t}function et(t,e,i){if(!ms())return;let s=li.get(t);s||li.set(t,s=new Map);let r=s.get(i);r||s.set(i,r=ai()),ds(r)}function ms(){return jt&&Tt!==void 0}function ds(t,e){let i=!1;he<=fi?cs(t)||(t.n|=At,i=!us(t)):i=!t.has(Tt),i&&(t.add(Tt),Tt.deps.push(t))}function _t(t,e,i,s,r,n){const o=li.get(t);if(!o)return;let h=[];if(e==="clear")h=[...o.values()];else if(i==="length"&&T(t))o.forEach((f,u)=>{(u==="length"||u>=s)&&h.push(f)});else switch(i!==void 0&&h.push(o.get(i)),e){case"add":T(t)?hi(i)&&h.push(o.get("length")):(h.push(o.get(Ot)),Ut(t)&&h.push(o.get(ui)));break;case"delete":T(t)||(h.push(o.get(Ot)),Ut(t)&&h.push(o.get(ui)));break;case"set":Ut(t)&&h.push(o.get(Ot));break}if(h.length===1)h[0]&&mi(h[0]);else{const f=[];for(const u of h)u&&f.push(...u);mi(ai(f))}}function mi(t,e){for(const i of T(t)?t:[...t])(i!==Tt||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Nn=ei("__proto__,__v_isRef,__isVue"),_s=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(ni)),Tn=di(),On=di(!1,!0),Fn=di(!0),Rs=yn();function yn(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const s=v(this);for(let n=0,o=this.length;n<o;n++)et(s,"get",n+"");const r=s[e](...i);return r===-1||r===!1?s[e](...i.map(v)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){Kt();const s=v(this)[e].apply(this,i);return Ft(),s}}),t}function di(t=!1,e=!1){return function(s,r,n){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_raw"&&n===(t?e?Zn:Es:e?Ds:Is).get(s))return s;const o=T(s);if(!t&&o&&w(Rs,r))return Reflect.get(Rs,r,n);const h=Reflect.get(s,r,n);return(ni(r)?_s.has(r):Nn(r))||(t||et(s,"get",r),e)?h:it(h)?!o||!hi(r)?h.value:h:H(h)?t?Ns(h):xi(h):h}}const Mn=xs(),Pn=xs(!0);function xs(t=!1){return function(i,s,r,n){let o=i[s];if(!t&&(r=v(r),o=v(o),!T(i)&&it(o)&&!it(r)))return o.value=r,!0;const h=T(i)&&hi(s)?Number(s)<i.length:w(i,s),f=Reflect.set(i,s,r,n);return i===v(n)&&(h?Ne(r,o)&&_t(i,"set",s,r):_t(i,"add",s,r)),f}}function wn(t,e){const i=w(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&i&&_t(t,"delete",e,void 0),s}function vn(t,e){const i=Reflect.has(t,e);return(!ni(e)||!_s.has(e))&&et(t,"has",e),i}function Ln(t){return et(t,"iterate",T(t)?"length":Ot),Reflect.ownKeys(t)}const gs={get:Tn,set:Mn,deleteProperty:wn,has:vn,ownKeys:Ln},kn={get:Fn,set(t,e){return!0},deleteProperty(t,e){return!0}},Bn=j({},gs,{get:On,set:Pn}),_i=t=>t,ye=t=>Reflect.getPrototypeOf(t);function Me(t,e,i=!1,s=!1){t=t.__v_raw;const r=v(t),n=v(e);e!==n&&!i&&et(r,"get",e),!i&&et(r,"get",n);const{has:o}=ye(r),h=s?_i:i?Ai:Si;if(o.call(r,e))return h(t.get(e));if(o.call(r,n))return h(t.get(n));t!==r&&t.get(e)}function Pe(t,e=!1){const i=this.__v_raw,s=v(i),r=v(t);return t!==r&&!e&&et(s,"has",t),!e&&et(s,"has",r),t===r?i.has(t):i.has(t)||i.has(r)}function we(t,e=!1){return t=t.__v_raw,!e&&et(v(t),"iterate",Ot),Reflect.get(t,"size",t)}function Ss(t){t=v(t);const e=v(this);return ye(e).has.call(e,t)||(e.add(t),_t(e,"add",t,t)),this}function As(t,e){e=v(e);const i=v(this),{has:s,get:r}=ye(i);let n=s.call(i,t);n||(t=v(t),n=s.call(i,t));const o=r.call(i,t);return i.set(t,e),n?Ne(e,o)&&_t(i,"set",t,e):_t(i,"add",t,e),this}function bs(t){const e=v(this),{has:i,get:s}=ye(e);let r=i.call(e,t);r||(t=v(t),r=i.call(e,t)),s&&s.call(e,t);const n=e.delete(t);return r&&_t(e,"delete",t,void 0),n}function Cs(){const t=v(this),e=t.size!==0,i=t.clear();return e&&_t(t,"clear",void 0,void 0),i}function ve(t,e){return function(s,r){const n=this,o=n.__v_raw,h=v(o),f=e?_i:t?Ai:Si;return!t&&et(h,"iterate",Ot),o.forEach((u,R)=>s.call(r,f(u),f(R),n))}}function Le(t,e,i){return function(...s){const r=this.__v_raw,n=v(r),o=Ut(n),h=t==="entries"||t===Symbol.iterator&&o,f=t==="keys"&&o,u=r[t](...s),R=i?_i:e?Ai:Si;return!e&&et(n,"iterate",f?ui:Ot),{next(){const{value:S,done:b}=u.next();return b?{value:S,done:b}:{value:h?[R(S[0]),R(S[1])]:R(S),done:b}},[Symbol.iterator](){return this}}}}function bt(t){return function(...e){return t==="delete"?!1:this}}function Vn(){const t={get(n){return Me(this,n)},get size(){return we(this)},has:Pe,add:Ss,set:As,delete:bs,clear:Cs,forEach:ve(!1,!1)},e={get(n){return Me(this,n,!1,!0)},get size(){return we(this)},has:Pe,add:Ss,set:As,delete:bs,clear:Cs,forEach:ve(!1,!0)},i={get(n){return Me(this,n,!0)},get size(){return we(this,!0)},has(n){return Pe.call(this,n,!0)},add:bt("add"),set:bt("set"),delete:bt("delete"),clear:bt("clear"),forEach:ve(!0,!1)},s={get(n){return Me(this,n,!0,!0)},get size(){return we(this,!0)},has(n){return Pe.call(this,n,!0)},add:bt("add"),set:bt("set"),delete:bt("delete"),clear:bt("clear"),forEach:ve(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=Le(n,!1,!1),i[n]=Le(n,!0,!1),e[n]=Le(n,!1,!0),s[n]=Le(n,!0,!0)}),[t,i,e,s]}const[Gn,qn,Xn,Hn]=Vn();function Ri(t,e){const i=e?t?Hn:Xn:t?qn:Gn;return(s,r,n)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(w(i,r)&&r in s?i:s,r,n)}const Yn={get:Ri(!1,!1)},Wn={get:Ri(!1,!0)},Un={get:Ri(!0,!1)},Is=new WeakMap,Ds=new WeakMap,Es=new WeakMap,Zn=new WeakMap;function jn(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kn(t){return t.__v_skip||!Object.isExtensible(t)?0:jn(xn(t))}function xi(t){return t&&t.__v_isReadonly?t:gi(t,!1,gs,Yn,Is)}function zn(t){return gi(t,!1,Bn,Wn,Ds)}function Ns(t){return gi(t,!0,kn,Un,Es)}function gi(t,e,i,s,r){if(!H(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const n=r.get(t);if(n)return n;const o=Kn(t);if(o===0)return t;const h=new Proxy(t,o===2?s:i);return r.set(t,h),h}function zt(t){return Ts(t)?zt(t.__v_raw):!!(t&&t.__v_isReactive)}function Ts(t){return!!(t&&t.__v_isReadonly)}function Os(t){return zt(t)||Ts(t)}function v(t){const e=t&&t.__v_raw;return e?v(e):t}function Fs(t){return Oe(t,"__v_skip",!0),t}const Si=t=>H(t)?xi(t):t,Ai=t=>H(t)?Ns(t):t;function Jn(t){ms()&&(t=v(t),t.dep||(t.dep=ai()),ds(t.dep))}function $n(t,e){t=v(t),t.dep&&mi(t.dep)}function it(t){return Boolean(t&&t.__v_isRef===!0)}function Qn(t){return it(t)?t.value:t}const th={get:(t,e,i)=>Qn(Reflect.get(t,e,i)),set:(t,e,i,s)=>{const r=t[e];return it(r)&&!it(i)?(r.value=i,!0):Reflect.set(t,e,i,s)}};function ys(t){return zt(t)?t:new Proxy(t,th)}class eh{constructor(e,i,s){this._setter=i,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new ci(e,()=>{this._dirty||(this._dirty=!0,$n(this))}),this.__v_isReadonly=s}get value(){const e=v(this);return Jn(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ih(t,e){let i,s;const r=O(t);return r?(i=t,s=ht):(i=t.get,s=t.set),new eh(i,s,r||!s)}Promise.resolve();function sh(t,e,...i){const s=t.vnode.props||k;let r=i;const n=e.startsWith("update:"),o=n&&e.slice(7);if(o&&o in s){const R=`${o==="modelValue"?"model":o}Modifiers`,{number:S,trim:b}=s[R]||k;b?r=i.map(F=>F.trim()):S&&(r=i.map(ls))}let h,f=s[h=oi(e)]||s[h=oi(ft(e))];!f&&n&&(f=s[h=oi(Zt(e))]),f&&at(f,t,6,r);const u=s[h+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,at(u,t,6,r)}}function Ms(t,e,i=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const n=t.emits;let o={},h=!1;if(!O(t)){const f=u=>{const R=Ms(u,e,!0);R&&(h=!0,j(o,R))};!i&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!n&&!h?(s.set(t,null),null):(T(n)?n.forEach(f=>o[f]=null):j(o,n),s.set(t,o),o)}function bi(t,e){return!t||!Ae(e)?!1:(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,Zt(e))||w(t,e))}let ot=null,Ps=null;function ke(t){const e=ot;return ot=t,Ps=t&&t.type.__scopeId||null,e}function rh(t,e=ot,i){if(!e||t._n)return t;const s=(...r)=>{s._d&&er(-1);const n=ke(e),o=t(...r);return ke(n),s._d&&er(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function Ci(t){const{type:e,vnode:i,proxy:s,withProxy:r,props:n,propsOptions:[o],slots:h,attrs:f,emit:u,render:R,renderCache:S,data:b,setupState:F,ctx:B,inheritAttrs:Y}=t;let y,M;const $=ke(t);try{if(i.shapeFlag&4){const Z=r||s;y=ct(R.call(Z,Z,S,n,F,b,B)),M=f}else{const Z=e;y=ct(Z.length>1?Z(n,{attrs:f,slots:h,emit:u}):Z(n,null)),M=e.props?f:nh(f)}}catch(Z){le.length=0,We(Z,t,1),y=wt(ae)}let Q=y;if(M&&Y!==!1){const Z=Object.keys(M),{shapeFlag:Gt}=Q;Z.length&&Gt&(1|6)&&(o&&Z.some(ri)&&(M=hh(M,o)),Q=ue(Q,M))}return i.dirs&&(Q.dirs=Q.dirs?Q.dirs.concat(i.dirs):i.dirs),i.transition&&(Q.transition=i.transition),y=Q,ke($),y}const nh=t=>{let e;for(const i in t)(i==="class"||i==="style"||Ae(i))&&((e||(e={}))[i]=t[i]);return e},hh=(t,e)=>{const i={};for(const s in t)(!ri(s)||!(s.slice(9)in e))&&(i[s]=t[s]);return i};function oh(t,e,i){const{props:s,children:r,component:n}=t,{props:o,children:h,patchFlag:f}=e,u=n.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&f>=0){if(f&1024)return!0;if(f&16)return s?ws(s,o,u):!!o;if(f&8){const R=e.dynamicProps;for(let S=0;S<R.length;S++){const b=R[S];if(o[b]!==s[b]&&!bi(u,b))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:s===o?!1:s?o?ws(s,o,u):!0:!!o;return!1}function ws(t,e,i){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(e[n]!==t[n]&&!bi(i,n))return!0}return!1}function ah({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const lh=t=>t.__isSuspense;function fh(t,e){e&&e.pendingBranch?T(t)?e.effects.push(...t):e.effects.push(t):lo(t)}function uh(t,e){if(U){let i=U.provides;const s=U.parent&&U.parent.provides;s===i&&(i=U.provides=Object.create(s)),i[t]=e}}function Ii(t,e,i=!1){const s=U||ot;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return i&&O(e)?e.call(s.proxy):e}}function pa(t){return O(t)?{setup:t,name:t.name}:t}const Di=t=>!!t.type.__asyncLoader,vs=t=>t.type.__isKeepAlive;function ch(t,e){Ls(t,"a",e)}function ph(t,e){Ls(t,"da",e)}function Ls(t,e,i=U){const s=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}t()});if(Be(e,s,i),i){let r=i.parent;for(;r&&r.parent;)vs(r.parent.vnode)&&mh(s,e,i,r),r=r.parent}}function mh(t,e,i,s){const r=Be(e,t,s,!0);ks(()=>{ns(s[e],r)},i)}function Be(t,e,i=U,s=!1){if(i){const r=i[t]||(i[t]=[]),n=e.__weh||(e.__weh=(...o)=>{if(i.isUnmounted)return;Kt(),Jt(i);const h=at(e,i,t,o);return vt(),Ft(),h});return s?r.unshift(n):r.push(n),n}}const Rt=t=>(e,i=U)=>(!Ye||t==="sp")&&Be(t,e,i),dh=Rt("bm"),_h=Rt("m"),Rh=Rt("bu"),xh=Rt("u"),gh=Rt("bum"),ks=Rt("um"),Sh=Rt("sp"),Ah=Rt("rtg"),bh=Rt("rtc");function Ch(t,e=U){Be("ec",t,e)}let Ei=!0;function Ih(t){const e=Gs(t),i=t.proxy,s=t.ctx;Ei=!1,e.beforeCreate&&Bs(e.beforeCreate,t,"bc");const{data:r,computed:n,methods:o,watch:h,provide:f,inject:u,created:R,beforeMount:S,mounted:b,beforeUpdate:F,updated:B,activated:Y,deactivated:y,beforeDestroy:M,beforeUnmount:$,destroyed:Q,unmounted:Z,render:Gt,renderTracked:Ke,renderTriggered:ze,errorCaptured:Re,serverPrefetch:Et,expose:ee,inheritAttrs:qt,components:ie,directives:xe,filters:Ji}=e;if(u&&Dh(u,s,null,t.appContext.config.unwrapInjectedRef),o)for(const X in o){const V=o[X];O(V)&&(s[X]=V.bind(i))}if(r){const X=r.call(i,i);H(X)&&(t.data=xi(X))}if(Ei=!0,n)for(const X in n){const V=n[X],mt=O(V)?V.bind(i,i):O(V.get)?V.get.bind(i,i):ht,$e=!O(V)&&O(V.set)?V.set.bind(i):ht,se=ih({get:mt,set:$e});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>se.value,set:Xt=>se.value=Xt})}if(h)for(const X in h)Vs(h[X],s,i,X);if(f){const X=O(f)?f.call(i):f;Reflect.ownKeys(X).forEach(V=>{uh(V,X[V])})}R&&Bs(R,t,"c");function J(X,V){T(V)?V.forEach(mt=>X(mt.bind(i))):V&&X(V.bind(i))}if(J(dh,S),J(_h,b),J(Rh,F),J(xh,B),J(ch,Y),J(ph,y),J(Ch,Re),J(bh,Ke),J(Ah,ze),J(gh,$),J(ks,Z),J(Sh,Et),T(ee))if(ee.length){const X=t.exposed||(t.exposed={});ee.forEach(V=>{Object.defineProperty(X,V,{get:()=>i[V],set:mt=>i[V]=mt})})}else t.exposed||(t.exposed={});Gt&&t.render===ht&&(t.render=Gt),qt!=null&&(t.inheritAttrs=qt),ie&&(t.components=ie),xe&&(t.directives=xe)}function Dh(t,e,i=ht,s=!1){T(t)&&(t=Ni(t));for(const r in t){const n=t[r];let o;H(n)?"default"in n?o=Ii(n.from||r,n.default,!0):o=Ii(n.from||r):o=Ii(n),it(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:h=>o.value=h}):e[r]=o}}function Bs(t,e,i){at(T(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,i)}function Vs(t,e,i,s){const r=s.includes(".")?_r(i,s):()=>i[s];if(W(t)){const n=e[t];O(n)&&qi(r,n)}else if(O(t))qi(r,t.bind(i));else if(H(t))if(T(t))t.forEach(n=>Vs(n,e,i,s));else{const n=O(t.handler)?t.handler.bind(i):e[t.handler];O(n)&&qi(r,n,t)}}function Gs(t){const e=t.type,{mixins:i,extends:s}=e,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,h=n.get(e);let f;return h?f=h:!r.length&&!i&&!s?f=e:(f={},r.length&&r.forEach(u=>Ve(f,u,o,!0)),Ve(f,e,o)),n.set(e,f),f}function Ve(t,e,i,s=!1){const{mixins:r,extends:n}=e;n&&Ve(t,n,i,!0),r&&r.forEach(o=>Ve(t,o,i,!0));for(const o in e)if(!(s&&o==="expose")){const h=Eh[o]||i&&i[o];t[o]=h?h(t[o],e[o]):e[o]}return t}const Eh={data:qs,props:yt,emits:yt,methods:yt,computed:yt,beforeCreate:K,created:K,beforeMount:K,mounted:K,beforeUpdate:K,updated:K,beforeDestroy:K,beforeUnmount:K,destroyed:K,unmounted:K,activated:K,deactivated:K,errorCaptured:K,serverPrefetch:K,components:yt,directives:yt,watch:Th,provide:qs,inject:Nh};function qs(t,e){return e?t?function(){return j(O(t)?t.call(this,this):t,O(e)?e.call(this,this):e)}:e:t}function Nh(t,e){return yt(Ni(t),Ni(e))}function Ni(t){if(T(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function K(t,e){return t?[...new Set([].concat(t,e))]:e}function yt(t,e){return t?j(j(Object.create(null),t),e):e}function Th(t,e){if(!t)return e;if(!e)return t;const i=j(Object.create(null),t);for(const s in e)i[s]=K(t[s],e[s]);return i}function Oh(t,e,i,s=!1){const r={},n={};Oe(n,qe,1),t.propsDefaults=Object.create(null),Xs(t,e,r,n);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);i?t.props=s?r:zn(r):t.type.props?t.props=r:t.props=n,t.attrs=n}function Fh(t,e,i,s){const{props:r,attrs:n,vnode:{patchFlag:o}}=t,h=v(r),[f]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const R=t.vnode.dynamicProps;for(let S=0;S<R.length;S++){let b=R[S];const F=e[b];if(f)if(w(n,b))F!==n[b]&&(n[b]=F,u=!0);else{const B=ft(b);r[B]=Ti(f,h,B,F,t,!1)}else F!==n[b]&&(n[b]=F,u=!0)}}}else{Xs(t,e,r,n)&&(u=!0);let R;for(const S in h)(!e||!w(e,S)&&((R=Zt(S))===S||!w(e,R)))&&(f?i&&(i[S]!==void 0||i[R]!==void 0)&&(r[S]=Ti(f,h,S,void 0,t,!0)):delete r[S]);if(n!==h)for(const S in n)(!e||!w(e,S))&&(delete n[S],u=!0)}u&&_t(t,"set","$attrs")}function Xs(t,e,i,s){const[r,n]=t.propsOptions;let o=!1,h;if(e)for(let f in e){if(Ie(f))continue;const u=e[f];let R;r&&w(r,R=ft(f))?!n||!n.includes(R)?i[R]=u:(h||(h={}))[R]=u:bi(t.emitsOptions,f)||u!==s[f]&&(s[f]=u,o=!0)}if(n){const f=v(i),u=h||k;for(let R=0;R<n.length;R++){const S=n[R];i[S]=Ti(r,f,S,u[S],t,!w(u,S))}}return o}function Ti(t,e,i,s,r,n){const o=t[i];if(o!=null){const h=w(o,"default");if(h&&s===void 0){const f=o.default;if(o.type!==Function&&O(f)){const{propsDefaults:u}=r;i in u?s=u[i]:(Jt(r),s=u[i]=f.call(null,e),vt())}else s=f}o[0]&&(n&&!h?s=!1:o[1]&&(s===""||s===Zt(i))&&(s=!0))}return s}function Hs(t,e,i=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const n=t.props,o={},h=[];let f=!1;if(!O(t)){const R=S=>{f=!0;const[b,F]=Hs(S,e,!0);j(o,b),F&&h.push(...F)};!i&&e.mixins.length&&e.mixins.forEach(R),t.extends&&R(t.extends),t.mixins&&t.mixins.forEach(R)}if(!n&&!f)return s.set(t,Wt),Wt;if(T(n))for(let R=0;R<n.length;R++){const S=ft(n[R]);Ys(S)&&(o[S]=k)}else if(n)for(const R in n){const S=ft(R);if(Ys(S)){const b=n[R],F=o[S]=T(b)||O(b)?{type:b}:b;if(F){const B=Zs(Boolean,F.type),Y=Zs(String,F.type);F[0]=B>-1,F[1]=Y<0||B<Y,(B>-1||w(F,"default"))&&h.push(S)}}}const u=[o,h];return s.set(t,u),u}function Ys(t){return t[0]!=="$"}function Ws(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Us(t,e){return Ws(t)===Ws(e)}function Zs(t,e){return T(e)?e.findIndex(i=>Us(i,t)):O(e)&&Us(e,t)?0:-1}const js=t=>t[0]==="_"||t==="$stable",Oi=t=>T(t)?t.map(ct):[ct(t)],yh=(t,e,i)=>{const s=rh((...r)=>Oi(e(...r)),i);return s._c=!1,s},Ks=(t,e,i)=>{const s=t._ctx;for(const r in t){if(js(r))continue;const n=t[r];if(O(n))e[r]=yh(r,n,s);else if(n!=null){const o=Oi(n);e[r]=()=>o}}},zs=(t,e)=>{const i=Oi(e);t.slots.default=()=>i},Mh=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=v(e),Oe(e,"_",i)):Ks(e,t.slots={})}else t.slots={},e&&zs(t,e);Oe(t.slots,qe,1)},Ph=(t,e,i)=>{const{vnode:s,slots:r}=t;let n=!0,o=k;if(s.shapeFlag&32){const h=e._;h?i&&h===1?n=!1:(j(r,e),!i&&h===1&&delete r._):(n=!e.$stable,Ks(e,r)),o=e}else e&&(zs(t,e),o={default:1});if(n)for(const h in r)!js(h)&&!(h in o)&&delete r[h]};function ma(t,e){const i=ot;if(i===null)return t;const s=i.proxy,r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[o,h,f,u=k]=e[n];O(o)&&(o={mounted:o,updated:o}),o.deep&&Lt(h),r.push({dir:o,instance:s,value:h,oldValue:void 0,arg:f,modifiers:u})}return t}function Mt(t,e,i,s){const r=t.dirs,n=e&&e.dirs;for(let o=0;o<r.length;o++){const h=r[o];n&&(h.oldValue=n[o].value);let f=h.dir[s];f&&(Kt(),at(f,i,8,[t.el,h,t,e]),Ft())}}function Js(){return{app:null,config:{isNativeTag:dn,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wh=0;function vh(t,e){return function(s,r=null){r!=null&&!H(r)&&(r=null);const n=Js(),o=new Set;let h=!1;const f=n.app={_uid:wh++,_component:s,_props:r,_container:null,_context:n,_instance:null,version:uo,get config(){return n.config},set config(u){},use(u,...R){return o.has(u)||(u&&O(u.install)?(o.add(u),u.install(f,...R)):O(u)&&(o.add(u),u(f,...R))),f},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),f},component(u,R){return R?(n.components[u]=R,f):n.components[u]},directive(u,R){return R?(n.directives[u]=R,f):n.directives[u]},mount(u,R,S){if(!h){const b=wt(s,r);return b.appContext=n,R&&e?e(b,u):t(b,u,S),h=!0,f._container=u,u.__vue_app__=f,vi(b.component)||b.component.proxy}},unmount(){h&&(t(null,f._container),delete f._container.__vue_app__)},provide(u,R){return n.provides[u]=R,f}};return f}}const z=fh;function Lh(t){return kh(t)}function kh(t,e){const i=An();i.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:o,createText:h,createComment:f,setText:u,setElementText:R,parentNode:S,nextSibling:b,setScopeId:F=ht,cloneNode:B,insertStaticContent:Y}=t,y=(a,l,c,m=null,p=null,A=null,C=!1,x=null,g=!!l.dynamicChildren)=>{if(a===l)return;a&&!fe(a,l)&&(m=ge(a),St(a,p,A,!0),a=null),l.patchFlag===-2&&(g=!1,l.dynamicChildren=null);const{type:d,ref:D,shapeFlag:I}=l;switch(d){case yi:M(a,l,c,m);break;case ae:$(a,l,c,m);break;case Mi:a==null&&Q(l,c,m,C);break;case xt:xe(a,l,c,m,p,A,C,x,g);break;default:I&1?Ke(a,l,c,m,p,A,C,x,g):I&6?Ji(a,l,c,m,p,A,C,x,g):(I&64||I&128)&&d.process(a,l,c,m,p,A,C,x,g,Ht)}D!=null&&p&&Fi(D,a&&a.ref,A,l||a,!l)},M=(a,l,c,m)=>{if(a==null)s(l.el=h(l.children),c,m);else{const p=l.el=a.el;l.children!==a.children&&u(p,l.children)}},$=(a,l,c,m)=>{a==null?s(l.el=f(l.children||""),c,m):l.el=a.el},Q=(a,l,c,m)=>{[a.el,a.anchor]=Y(a.children,l,c,m)},Z=({el:a,anchor:l},c,m)=>{let p;for(;a&&a!==l;)p=b(a),s(a,c,m),a=p;s(l,c,m)},Gt=({el:a,anchor:l})=>{let c;for(;a&&a!==l;)c=b(a),r(a),a=c;r(l)},Ke=(a,l,c,m,p,A,C,x,g)=>{C=C||l.type==="svg",a==null?ze(l,c,m,p,A,C,x,g):ee(a,l,p,A,C,x,g)},ze=(a,l,c,m,p,A,C,x)=>{let g,d;const{type:D,props:I,shapeFlag:E,transition:N,patchFlag:P,dirs:q}=a;if(a.el&&B!==void 0&&P===-1)g=a.el=B(a.el);else{if(g=a.el=o(a.type,A,I&&I.is,I),E&8?R(g,a.children):E&16&&Et(a.children,g,null,m,p,A&&D!=="foreignObject",C,x),q&&Mt(a,null,m,"created"),I){for(const G in I)G!=="value"&&!Ie(G)&&n(g,G,null,I[G],A,a.children,m,p,dt);"value"in I&&n(g,"value",null,I.value),(d=I.onVnodeBeforeMount)&&ut(d,m,a)}Re(g,a,a.scopeId,C,m)}q&&Mt(a,null,m,"beforeMount");const L=(!p||p&&!p.pendingBranch)&&N&&!N.persisted;L&&N.beforeEnter(g),s(g,l,c),((d=I&&I.onVnodeMounted)||L||q)&&z(()=>{d&&ut(d,m,a),L&&N.enter(g),q&&Mt(a,null,m,"mounted")},p)},Re=(a,l,c,m,p)=>{if(c&&F(a,c),m)for(let A=0;A<m.length;A++)F(a,m[A]);if(p){let A=p.subTree;if(l===A){const C=p.vnode;Re(a,C,C.scopeId,C.slotScopeIds,p.parent)}}},Et=(a,l,c,m,p,A,C,x,g=0)=>{for(let d=g;d<a.length;d++){const D=a[d]=x?Ct(a[d]):ct(a[d]);y(null,D,l,c,m,p,A,C,x)}},ee=(a,l,c,m,p,A,C)=>{const x=l.el=a.el;let{patchFlag:g,dynamicChildren:d,dirs:D}=l;g|=a.patchFlag&16;const I=a.props||k,E=l.props||k;let N;(N=E.onVnodeBeforeUpdate)&&ut(N,c,l,a),D&&Mt(l,a,c,"beforeUpdate");const P=p&&l.type!=="foreignObject";if(d?qt(a.dynamicChildren,d,x,c,m,P,A):C||mt(a,l,x,null,c,m,P,A,!1),g>0){if(g&16)ie(x,l,I,E,c,m,p);else if(g&2&&I.class!==E.class&&n(x,"class",null,E.class,p),g&4&&n(x,"style",I.style,E.style,p),g&8){const q=l.dynamicProps;for(let L=0;L<q.length;L++){const G=q[L],nt=I[G],Yt=E[G];(Yt!==nt||G==="value")&&n(x,G,nt,Yt,p,a.children,c,m,dt)}}g&1&&a.children!==l.children&&R(x,l.children)}else!C&&d==null&&ie(x,l,I,E,c,m,p);((N=E.onVnodeUpdated)||D)&&z(()=>{N&&ut(N,c,l,a),D&&Mt(l,a,c,"updated")},m)},qt=(a,l,c,m,p,A,C)=>{for(let x=0;x<l.length;x++){const g=a[x],d=l[x],D=g.el&&(g.type===xt||!fe(g,d)||g.shapeFlag&(6|64))?S(g.el):c;y(g,d,D,null,m,p,A,C,!0)}},ie=(a,l,c,m,p,A,C)=>{if(c!==m){for(const x in m){if(Ie(x))continue;const g=m[x],d=c[x];g!==d&&x!=="value"&&n(a,x,d,g,C,l.children,p,A,dt)}if(c!==k)for(const x in c)!Ie(x)&&!(x in m)&&n(a,x,c[x],null,C,l.children,p,A,dt);"value"in m&&n(a,"value",c.value,m.value)}},xe=(a,l,c,m,p,A,C,x,g)=>{const d=l.el=a?a.el:h(""),D=l.anchor=a?a.anchor:h("");let{patchFlag:I,dynamicChildren:E,slotScopeIds:N}=l;N&&(x=x?x.concat(N):N),a==null?(s(d,c,m),s(D,c,m),Et(l.children,c,D,p,A,C,x,g)):I>0&&I&64&&E&&a.dynamicChildren?(qt(a.dynamicChildren,E,c,p,A,C,x),(l.key!=null||p&&l===p.subTree)&&$s(a,l,!0)):mt(a,l,c,D,p,A,C,x,g)},Ji=(a,l,c,m,p,A,C,x,g)=>{l.slotScopeIds=x,a==null?l.shapeFlag&512?p.ctx.activate(l,c,m,C,g):Je(l,c,m,p,A,C,g):J(a,l,g)},Je=(a,l,c,m,p,A,C)=>{const x=a.component=$h(a,m,p);if(vs(a)&&(x.ctx.renderer=Ht),Qh(x),x.asyncDep){if(p&&p.registerDep(x,X),!a.el){const g=x.subTree=wt(ae);$(null,g,l,c)}return}X(x,a,l,c,p,A,C)},J=(a,l,c)=>{const m=l.component=a.component;if(oh(a,l,c))if(m.asyncDep&&!m.asyncResolved){V(m,l,c);return}else m.next=l,oo(m.update),m.update();else l.component=a.component,l.el=a.el,m.vnode=l},X=(a,l,c,m,p,A,C)=>{const x=()=>{if(a.isMounted){let{next:D,bu:I,u:E,parent:N,vnode:P}=a,q=D,L;g.allowRecurse=!1,D?(D.el=P.el,V(a,D,C)):D=P,I&&Te(I),(L=D.props&&D.props.onVnodeBeforeUpdate)&&ut(L,N,D,P),g.allowRecurse=!0;const G=Ci(a),nt=a.subTree;a.subTree=G,y(nt,G,S(nt.el),ge(nt),a,p,A),D.el=G.el,q===null&&ah(a,G.el),E&&z(E,p),(L=D.props&&D.props.onVnodeUpdated)&&z(()=>ut(L,N,D,P),p)}else{let D;const{el:I,props:E}=l,{bm:N,m:P,parent:q}=a,L=Di(l);if(g.allowRecurse=!1,N&&Te(N),!L&&(D=E&&E.onVnodeBeforeMount)&&ut(D,q,l),g.allowRecurse=!0,I&&ti){const G=()=>{a.subTree=Ci(a),ti(I,a.subTree,a,p,null)};L?l.type.__asyncLoader().then(()=>!a.isUnmounted&&G()):G()}else{const G=a.subTree=Ci(a);y(null,G,c,m,a,p,A),l.el=G.el}if(P&&z(P,p),!L&&(D=E&&E.onVnodeMounted)){const G=l;z(()=>ut(D,q,G),p)}l.shapeFlag&256&&a.a&&z(a.a,p),a.isMounted=!0,l=c=m=null}},g=new ci(x,()=>lr(a.update),a.scope),d=a.update=g.run.bind(g);d.id=a.uid,g.allowRecurse=d.allowRecurse=!0,d()},V=(a,l,c)=>{l.component=a;const m=a.vnode.props;a.vnode=l,a.next=null,Fh(a,l.props,m,c),Ph(a,l.children,c),Kt(),Gi(void 0,a.update),Ft()},mt=(a,l,c,m,p,A,C,x,g=!1)=>{const d=a&&a.children,D=a?a.shapeFlag:0,I=l.children,{patchFlag:E,shapeFlag:N}=l;if(E>0){if(E&128){se(d,I,c,m,p,A,C,x,g);return}else if(E&256){$e(d,I,c,m,p,A,C,x,g);return}}N&8?(D&16&&dt(d,p,A),I!==d&&R(c,I)):D&16?N&16?se(d,I,c,m,p,A,C,x,g):dt(d,p,A,!0):(D&8&&R(c,""),N&16&&Et(I,c,m,p,A,C,x,g))},$e=(a,l,c,m,p,A,C,x,g)=>{a=a||Wt,l=l||Wt;const d=a.length,D=l.length,I=Math.min(d,D);let E;for(E=0;E<I;E++){const N=l[E]=g?Ct(l[E]):ct(l[E]);y(a[E],N,c,null,p,A,C,x,g)}d>D?dt(a,p,A,!0,!1,I):Et(l,c,m,p,A,C,x,g,I)},se=(a,l,c,m,p,A,C,x,g)=>{let d=0;const D=l.length;let I=a.length-1,E=D-1;for(;d<=I&&d<=E;){const N=a[d],P=l[d]=g?Ct(l[d]):ct(l[d]);if(fe(N,P))y(N,P,c,null,p,A,C,x,g);else break;d++}for(;d<=I&&d<=E;){const N=a[I],P=l[E]=g?Ct(l[E]):ct(l[E]);if(fe(N,P))y(N,P,c,null,p,A,C,x,g);else break;I--,E--}if(d>I){if(d<=E){const N=E+1,P=N<D?l[N].el:m;for(;d<=E;)y(null,l[d]=g?Ct(l[d]):ct(l[d]),c,P,p,A,C,x,g),d++}}else if(d>E)for(;d<=I;)St(a[d],p,A,!0),d++;else{const N=d,P=d,q=new Map;for(d=P;d<=E;d++){const tt=l[d]=g?Ct(l[d]):ct(l[d]);tt.key!=null&&q.set(tt.key,d)}let L,G=0;const nt=E-P+1;let Yt=!1,ts=0;const re=new Array(nt);for(d=0;d<nt;d++)re[d]=0;for(d=N;d<=I;d++){const tt=a[d];if(G>=nt){St(tt,p,A,!0);continue}let lt;if(tt.key!=null)lt=q.get(tt.key);else for(L=P;L<=E;L++)if(re[L-P]===0&&fe(tt,l[L])){lt=L;break}lt===void 0?St(tt,p,A,!0):(re[lt-P]=d+1,lt>=ts?ts=lt:Yt=!0,y(tt,l[lt],c,null,p,A,C,x,g),G++)}const es=Yt?Bh(re):Wt;for(L=es.length-1,d=nt-1;d>=0;d--){const tt=P+d,lt=l[tt],is=tt+1<D?l[tt+1].el:m;re[d]===0?y(null,lt,c,is,p,A,C,x,g):Yt&&(L<0||d!==es[L]?Xt(lt,c,is,2):L--)}}},Xt=(a,l,c,m,p=null)=>{const{el:A,type:C,transition:x,children:g,shapeFlag:d}=a;if(d&6){Xt(a.component.subTree,l,c,m);return}if(d&128){a.suspense.move(l,c,m);return}if(d&64){C.move(a,l,c,Ht);return}if(C===xt){s(A,l,c);for(let I=0;I<g.length;I++)Xt(g[I],l,c,m);s(a.anchor,l,c);return}if(C===Mi){Z(a,l,c);return}if(m!==2&&d&1&&x)if(m===0)x.beforeEnter(A),s(A,l,c),z(()=>x.enter(A),p);else{const{leave:I,delayLeave:E,afterLeave:N}=x,P=()=>s(A,l,c),q=()=>{I(A,()=>{P(),N&&N()})};E?E(A,P,q):q()}else s(A,l,c)},St=(a,l,c,m=!1,p=!1)=>{const{type:A,props:C,ref:x,children:g,dynamicChildren:d,shapeFlag:D,patchFlag:I,dirs:E}=a;if(x!=null&&Fi(x,null,c,a,!0),D&256){l.ctx.deactivate(a);return}const N=D&1&&E,P=!Di(a);let q;if(P&&(q=C&&C.onVnodeBeforeUnmount)&&ut(q,l,a),D&6)on(a.component,c,m);else{if(D&128){a.suspense.unmount(c,m);return}N&&Mt(a,null,l,"beforeUnmount"),D&64?a.type.remove(a,l,c,p,Ht,m):d&&(A!==xt||I>0&&I&64)?dt(d,l,c,!1,!0):(A===xt&&I&(128|256)||!p&&D&16)&&dt(g,l,c),m&&$i(a)}(P&&(q=C&&C.onVnodeUnmounted)||N)&&z(()=>{q&&ut(q,l,a),N&&Mt(a,null,l,"unmounted")},c)},$i=a=>{const{type:l,el:c,anchor:m,transition:p}=a;if(l===xt){hn(c,m);return}if(l===Mi){Gt(a);return}const A=()=>{r(c),p&&!p.persisted&&p.afterLeave&&p.afterLeave()};if(a.shapeFlag&1&&p&&!p.persisted){const{leave:C,delayLeave:x}=p,g=()=>C(c,A);x?x(a.el,A,g):g()}else A()},hn=(a,l)=>{let c;for(;a!==l;)c=b(a),r(a),a=c;r(l)},on=(a,l,c)=>{const{bum:m,scope:p,update:A,subTree:C,um:x}=a;m&&Te(m),p.stop(),A&&(A.active=!1,St(C,a,l,c)),x&&z(x,l),z(()=>{a.isUnmounted=!0},l),l&&l.pendingBranch&&!l.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===l.pendingId&&(l.deps--,l.deps===0&&l.resolve())},dt=(a,l,c,m=!1,p=!1,A=0)=>{for(let C=A;C<a.length;C++)St(a[C],l,c,m,p)},ge=a=>a.shapeFlag&6?ge(a.component.subTree):a.shapeFlag&128?a.suspense.next():b(a.anchor||a.el),Qi=(a,l,c)=>{a==null?l._vnode&&St(l._vnode,null,null,!0):y(l._vnode||null,a,l,null,null,null,c),cr(),l._vnode=a},Ht={p:y,um:St,m:Xt,r:$i,mt:Je,mc:Et,pc:mt,pbc:qt,n:ge,o:t};let Qe,ti;return e&&([Qe,ti]=e(Ht)),{render:Qi,hydrate:Qe,createApp:vh(Qi,Qe)}}function Fi(t,e,i,s,r=!1){if(T(t)){t.forEach((b,F)=>Fi(b,e&&(T(e)?e[F]:e),i,s,r));return}if(Di(s)&&!r)return;const n=s.shapeFlag&4?vi(s.component)||s.component.proxy:s.el,o=r?null:n,{i:h,r:f}=t,u=e&&e.r,R=h.refs===k?h.refs={}:h.refs,S=h.setupState;if(u!=null&&u!==f&&(W(u)?(R[u]=null,w(S,u)&&(S[u]=null)):it(u)&&(u.value=null)),W(f)){const b=()=>{R[f]=o,w(S,f)&&(S[f]=o)};o?(b.id=-1,z(b,i)):b()}else if(it(f)){const b=()=>{f.value=o};o?(b.id=-1,z(b,i)):b()}else O(f)&&It(f,h,12,[o,R])}function ut(t,e,i,s=null){at(t,e,7,[i,s])}function $s(t,e,i=!1){const s=t.children,r=e.children;if(T(s)&&T(r))for(let n=0;n<s.length;n++){const o=s[n];let h=r[n];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[n]=Ct(r[n]),h.el=o.el),i||$s(o,h))}}function Bh(t){const e=t.slice(),i=[0];let s,r,n,o,h;const f=t.length;for(s=0;s<f;s++){const u=t[s];if(u!==0){if(r=i[i.length-1],t[r]<u){e[s]=r,i.push(s);continue}for(n=0,o=i.length-1;n<o;)h=n+o>>1,t[i[h]]<u?n=h+1:o=h;u<t[i[n]]&&(n>0&&(e[s]=i[n-1]),i[n]=s)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=e[o];return i}const Vh=t=>t.__isTeleport,Qs="components";function da(t,e){return qh(Qs,t,!0,e)||t}const Gh=Symbol();function qh(t,e,i=!0,s=!1){const r=ot||U;if(r){const n=r.type;if(t===Qs){const h=so(n);if(h&&(h===e||h===ft(e)||h===Ee(ft(e))))return n}const o=tr(r[t]||n[t],e)||tr(r.appContext[t],e);return!o&&s?n:o}}function tr(t,e){return t&&(t[e]||t[ft(e)]||t[Ee(ft(e))])}const xt=Symbol(void 0),yi=Symbol(void 0),ae=Symbol(void 0),Mi=Symbol(void 0),le=[];let Pt=null;function _a(t=!1){le.push(Pt=t?null:[])}function Xh(){le.pop(),Pt=le[le.length-1]||null}let Ge=1;function er(t){Ge+=t}function Hh(t){return t.dynamicChildren=Ge>0?Pt||Wt:null,Xh(),Ge>0&&Pt&&Pt.push(t),t}function Ra(t,e,i,s,r,n){return Hh(sr(t,e,i,s,r,n,!0))}function Yh(t){return t?t.__v_isVNode===!0:!1}function fe(t,e){return t.type===e.type&&t.key===e.key}const qe="__vInternal",ir=({key:t})=>t!=null?t:null,Xe=({ref:t})=>t!=null?W(t)||it(t)||O(t)?{i:ot,r:t}:t:null;function sr(t,e=null,i=null,s=0,r=null,n=t===xt?0:1,o=!1,h=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ir(e),ref:e&&Xe(e),scopeId:Ps,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return h?(Pi(f,i),n&128&&t.normalize(f)):i&&(f.shapeFlag|=W(i)?8:16),Ge>0&&!o&&Pt&&(f.patchFlag>0||n&6)&&f.patchFlag!==32&&Pt.push(f),f}const wt=Wh;function Wh(t,e=null,i=null,s=0,r=null,n=!1){if((!t||t===Gh)&&(t=ae),Yh(t)){const h=ue(t,e,!0);return i&&Pi(h,i),h}if(ro(t)&&(t=t.__vccOpts),e){e=Uh(e);let{class:h,style:f}=e;h&&!W(h)&&(e.class=si(h)),H(f)&&(Os(f)&&!T(f)&&(f=j({},f)),e.style=ii(f))}const o=W(t)?1:lh(t)?128:Vh(t)?64:H(t)?4:O(t)?2:0;return sr(t,e,i,s,r,o,n,!0)}function Uh(t){return t?Os(t)||qe in t?j({},t):t:null}function ue(t,e,i=!1){const{props:s,ref:r,patchFlag:n,children:o}=t,h=e?jh(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&ir(h),ref:e&&e.ref?i&&r?T(r)?r.concat(Xe(e)):[r,Xe(e)]:Xe(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xt?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ue(t.ssContent),ssFallback:t.ssFallback&&ue(t.ssFallback),el:t.el,anchor:t.anchor}}function Zh(t=" ",e=0){return wt(yi,null,t,e)}function ct(t){return t==null||typeof t=="boolean"?wt(ae):T(t)?wt(xt,null,t.slice()):typeof t=="object"?Ct(t):wt(yi,null,String(t))}function Ct(t){return t.el===null||t.memo?t:ue(t)}function Pi(t,e){let i=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(T(e))i=16;else if(typeof e=="object")if(s&(1|64)){const r=e.default;r&&(r._c&&(r._d=!1),Pi(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!(qe in e)?e._ctx=ot:r===3&&ot&&(ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else O(e)?(e={default:e,_ctx:ot},i=32):(e=String(e),s&64?(i=16,e=[Zh(e)]):i=8);t.children=e,t.shapeFlag|=i}function jh(...t){const e={};for(let i=0;i<t.length;i++){const s=t[i];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=si([e.class,s.class]));else if(r==="style")e.style=ii([e.style,s.style]);else if(Ae(r)){const n=e[r],o=s[r];n!==o&&(e[r]=n?[].concat(n,o):o)}else r!==""&&(e[r]=s[r])}return e}function xa(t,e,i,s){let r;const n=i&&i[s];if(T(t)||W(t)){r=new Array(t.length);for(let o=0,h=t.length;o<h;o++)r[o]=e(t[o],o,void 0,n&&n[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,n&&n[o])}else if(H(t))if(t[Symbol.iterator])r=Array.from(t,(o,h)=>e(o,h,void 0,n&&n[h]));else{const o=Object.keys(t);r=new Array(o.length);for(let h=0,f=o.length;h<f;h++){const u=o[h];r[h]=e(t[u],u,h,n&&n[h])}}else r=[];return i&&(i[s]=r),r}const wi=t=>t?rr(t)?vi(t)||t.proxy:wi(t.parent):null,He=j(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>wi(t.parent),$root:t=>wi(t.root),$emit:t=>t.emit,$options:t=>Gs(t),$forceUpdate:t=>()=>lr(t.update),$nextTick:t=>Vi.bind(t.proxy),$watch:t=>fo.bind(t)}),Kh={get({_:t},e){const{ctx:i,setupState:s,data:r,props:n,accessCache:o,type:h,appContext:f}=t;let u;if(e[0]!=="$"){const F=o[e];if(F!==void 0)switch(F){case 0:return s[e];case 1:return r[e];case 3:return i[e];case 2:return n[e]}else{if(s!==k&&w(s,e))return o[e]=0,s[e];if(r!==k&&w(r,e))return o[e]=1,r[e];if((u=t.propsOptions[0])&&w(u,e))return o[e]=2,n[e];if(i!==k&&w(i,e))return o[e]=3,i[e];Ei&&(o[e]=4)}}const R=He[e];let S,b;if(R)return e==="$attrs"&&et(t,"get",e),R(t);if((S=h.__cssModules)&&(S=S[e]))return S;if(i!==k&&w(i,e))return o[e]=3,i[e];if(b=f.config.globalProperties,w(b,e))return b[e]},set({_:t},e,i){const{data:s,setupState:r,ctx:n}=t;if(r!==k&&w(r,e))r[e]=i;else if(s!==k&&w(s,e))s[e]=i;else if(w(t.props,e))return!1;return e[0]==="$"&&e.slice(1)in t?!1:(n[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:s,appContext:r,propsOptions:n}},o){let h;return i[o]!==void 0||t!==k&&w(t,o)||e!==k&&w(e,o)||(h=n[0])&&w(h,o)||w(s,o)||w(He,o)||w(r.config.globalProperties,o)}},zh=Js();let Jh=0;function $h(t,e,i){const s=t.type,r=(e?e.appContext:t.appContext)||zh,n={uid:Jh++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,update:null,scope:new bn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hs(s,r),emitsOptions:Ms(s,r),emit:null,emitted:null,propsDefaults:k,inheritAttrs:s.inheritAttrs,ctx:k,data:k,props:k,attrs:k,slots:k,refs:k,setupState:k,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=sh.bind(null,n),t.ce&&t.ce(n),n}let U=null;const Jt=t=>{U=t,t.scope.on()},vt=()=>{U&&U.scope.off(),U=null};function rr(t){return t.vnode.shapeFlag&4}let Ye=!1;function Qh(t,e=!1){Ye=e;const{props:i,children:s}=t.vnode,r=rr(t);Oh(t,i,r,e),Mh(t,s);const n=r?to(t,e):void 0;return Ye=!1,n}function to(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=Fs(new Proxy(t.ctx,Kh));const{setup:s}=i;if(s){const r=t.setupContext=s.length>1?io(t):null;Jt(t),Kt();const n=It(s,t,0,[t.props,r]);if(Ft(),vt(),os(n)){if(n.then(vt,vt),e)return n.then(o=>{nr(t,o,e)}).catch(o=>{We(o,t,0)});t.asyncDep=n}else nr(t,n,e)}else or(t,e)}function nr(t,e,i){O(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:H(e)&&(t.setupState=ys(e)),or(t,i)}let hr;function or(t,e,i){const s=t.type;if(!t.render){if(!e&&hr&&!s.render){const r=s.template;if(r){const{isCustomElement:n,compilerOptions:o}=t.appContext.config,{delimiters:h,compilerOptions:f}=s,u=j(j({isCustomElement:n,delimiters:h},o),f);s.render=hr(r,u)}}t.render=s.render||ht}Jt(t),Kt(),Ih(t),Ft(),vt()}function eo(t){return new Proxy(t.attrs,{get(e,i){return et(t,"get","$attrs"),e[i]}})}function io(t){const e=s=>{t.exposed=s||{}};let i;return{get attrs(){return i||(i=eo(t))},slots:t.slots,emit:t.emit,expose:e}}function vi(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ys(Fs(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in He)return He[i](t)}}))}function so(t){return O(t)&&t.displayName||t.name}function ro(t){return O(t)&&"__vccOpts"in t}function It(t,e,i,s){let r;try{r=s?t(...s):t()}catch(n){We(n,e,i)}return r}function at(t,e,i,s){if(O(t)){const n=It(t,e,i,s);return n&&os(n)&&n.catch(o=>{We(o,e,i)}),n}const r=[];for(let n=0;n<t.length;n++)r.push(at(t[n],e,i,s));return r}function We(t,e,i,s=!0){const r=e?e.vnode:null;if(e){let n=e.parent;const o=e.proxy,h=i;for(;n;){const u=n.ec;if(u){for(let R=0;R<u.length;R++)if(u[R](t,o,h)===!1)return}n=n.parent}const f=e.appContext.config.errorHandler;if(f){It(f,null,10,[t,o,h]);return}}no(t,i,r,s)}function no(t,e,i,s=!0){console.error(t)}let Ue=!1,Li=!1;const st=[];let gt=0;const ce=[];let pe=null,$t=0;const me=[];let Dt=null,Qt=0;const ar=Promise.resolve();let ki=null,Bi=null;function Vi(t){const e=ki||ar;return t?e.then(this?t.bind(this):t):e}function ho(t){let e=gt+1,i=st.length;for(;e<i;){const s=e+i>>>1;de(st[s])<t?e=s+1:i=s}return e}function lr(t){(!st.length||!st.includes(t,Ue&&t.allowRecurse?gt+1:gt))&&t!==Bi&&(t.id==null?st.push(t):st.splice(ho(t.id),0,t),fr())}function fr(){!Ue&&!Li&&(Li=!0,ki=ar.then(pr))}function oo(t){const e=st.indexOf(t);e>gt&&st.splice(e,1)}function ur(t,e,i,s){T(t)?i.push(...t):(!e||!e.includes(t,t.allowRecurse?s+1:s))&&i.push(t),fr()}function ao(t){ur(t,pe,ce,$t)}function lo(t){ur(t,Dt,me,Qt)}function Gi(t,e=null){if(ce.length){for(Bi=e,pe=[...new Set(ce)],ce.length=0,$t=0;$t<pe.length;$t++)pe[$t]();pe=null,$t=0,Bi=null,Gi(t,e)}}function cr(t){if(me.length){const e=[...new Set(me)];if(me.length=0,Dt){Dt.push(...e);return}for(Dt=e,Dt.sort((i,s)=>de(i)-de(s)),Qt=0;Qt<Dt.length;Qt++)Dt[Qt]();Dt=null,Qt=0}}const de=t=>t.id==null?1/0:t.id;function pr(t){Li=!1,Ue=!0,Gi(t),st.sort((i,s)=>de(i)-de(s));const e=ht;try{for(gt=0;gt<st.length;gt++){const i=st[gt];i&&i.active!==!1&&It(i,null,14)}}finally{gt=0,st.length=0,cr(),Ue=!1,ki=null,(st.length||ce.length||me.length)&&pr(t)}}const mr={};function qi(t,e,i){return dr(t,e,i)}function dr(t,e,{immediate:i,deep:s,flush:r,onTrack:n,onTrigger:o}=k){const h=U;let f,u=!1,R=!1;if(it(t)?(f=()=>t.value,u=!!t._shallow):zt(t)?(f=()=>t,s=!0):T(t)?(R=!0,u=t.some(zt),f=()=>t.map(M=>{if(it(M))return M.value;if(zt(M))return Lt(M);if(O(M))return It(M,h,2)})):O(t)?e?f=()=>It(t,h,2):f=()=>{if(!(h&&h.isUnmounted))return S&&S(),at(t,h,3,[b])}:f=ht,e&&s){const M=f;f=()=>Lt(M())}let S,b=M=>{S=y.onStop=()=>{It(M,h,4)}};if(Ye)return b=ht,e?i&&at(e,h,3,[f(),R?[]:void 0,b]):f(),ht;let F=R?[]:mr;const B=()=>{if(!!y.active)if(e){const M=y.run();(s||u||(R?M.some(($,Q)=>Ne($,F[Q])):Ne(M,F)))&&(S&&S(),at(e,h,3,[M,F===mr?void 0:F,b]),F=M)}else y.run()};B.allowRecurse=!!e;let Y;r==="sync"?Y=B:r==="post"?Y=()=>z(B,h&&h.suspense):Y=()=>{!h||h.isMounted?ao(B):B()};const y=new ci(f,Y);return e?i?B():F=y.run():r==="post"?z(y.run.bind(y),h&&h.suspense):y.run(),()=>{y.stop(),h&&h.scope&&ns(h.scope.effects,y)}}function fo(t,e,i){const s=this.proxy,r=W(t)?t.includes(".")?_r(s,t):()=>s[t]:t.bind(s,s);let n;O(e)?n=e:(n=e.handler,i=e);const o=U;Jt(this);const h=dr(r,n.bind(s),i);return o?Jt(o):vt(),h}function _r(t,e){const i=e.split(".");return()=>{let s=t;for(let r=0;r<i.length&&s;r++)s=s[i[r]];return s}}function Lt(t,e){if(!H(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),it(t))Lt(t.value,e);else if(T(t))for(let i=0;i<t.length;i++)Lt(t[i],e);else if(be(t)||Ut(t))t.forEach(i=>{Lt(i,e)});else if(ne(t))for(const i in t)Lt(t[i],e);return t}const uo="3.2.19",co="http://www.w3.org/2000/svg",te=typeof document!="undefined"?document:null,Rr=new Map,po={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,s)=>{const r=e?te.createElementNS(co,t):te.createElement(t,i?{is:i}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>te.createTextNode(t),createComment:t=>te.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>te.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,i,s){const r=i?i.previousSibling:e.lastChild;let n=Rr.get(t);if(!n){const o=te.createElement("template");if(o.innerHTML=s?`<svg>${t}</svg>`:t,n=o.content,s){const h=n.firstChild;for(;h.firstChild;)n.appendChild(h.firstChild);n.removeChild(h)}Rr.set(t,n)}return e.insertBefore(n.cloneNode(!0),i),[r?r.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function mo(t,e,i){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function _o(t,e,i){const s=t.style,r=s.display;if(!i)t.removeAttribute("style");else if(W(i))e!==i&&(s.cssText=i);else{for(const n in i)Xi(s,n,i[n]);if(e&&!W(e))for(const n in e)i[n]==null&&Xi(s,n,"")}"_vod"in t&&(s.display=r)}const xr=/\s*!important$/;function Xi(t,e,i){if(T(i))i.forEach(s=>Xi(t,e,s));else if(e.startsWith("--"))t.setProperty(e,i);else{const s=Ro(t,e);xr.test(i)?t.setProperty(Zt(s),i.replace(xr,""),"important"):t[s]=i}}const gr=["Webkit","Moz","ms"],Hi={};function Ro(t,e){const i=Hi[e];if(i)return i;let s=ft(e);if(s!=="filter"&&s in t)return Hi[e]=s;s=Ee(s);for(let r=0;r<gr.length;r++){const n=gr[r]+s;if(n in t)return Hi[e]=n}return e}const Sr="http://www.w3.org/1999/xlink";function xo(t,e,i,s,r){if(s&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(Sr,e.slice(6,e.length)):t.setAttributeNS(Sr,e,i);else{const n=ln(e);i==null||n&&!ss(i)?t.removeAttribute(e):t.setAttribute(e,n?"":i)}}function go(t,e,i,s,r,n,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,n),t[e]=i==null?"":i;return}if(e==="value"&&t.tagName!=="PROGRESS"){t._value=i;const h=i==null?"":i;t.value!==h&&(t.value=h),i==null&&t.removeAttribute(e);return}if(i===""||i==null){const h=typeof t[e];if(h==="boolean"){t[e]=ss(i);return}else if(i==null&&h==="string"){t[e]="",t.removeAttribute(e);return}else if(h==="number"){try{t[e]=0}catch(f){}t.removeAttribute(e);return}}try{t[e]=i}catch(h){}}let Ze=Date.now,Ar=!1;if(typeof window!="undefined"){Ze()>document.createEvent("Event").timeStamp&&(Ze=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Ar=!!(t&&Number(t[1])<=53)}let Yi=0;const So=Promise.resolve(),Ao=()=>{Yi=0},bo=()=>Yi||(So.then(Ao),Yi=Ze());function br(t,e,i,s){t.addEventListener(e,i,s)}function Co(t,e,i,s){t.removeEventListener(e,i,s)}function Io(t,e,i,s,r=null){const n=t._vei||(t._vei={}),o=n[e];if(s&&o)o.value=s;else{const[h,f]=Do(e);if(s){const u=n[e]=Eo(s,r);br(t,h,u,f)}else o&&(Co(t,h,o,f),n[e]=void 0)}}const Cr=/(?:Once|Passive|Capture)$/;function Do(t){let e;if(Cr.test(t)){e={};let i;for(;i=t.match(Cr);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[Zt(t.slice(2)),e]}function Eo(t,e){const i=s=>{const r=s.timeStamp||Ze();(Ar||r>=i.attached-1)&&at(No(s,i.value),e,5,[s])};return i.value=t,i.attached=bo(),i}function No(t,e){if(T(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s(r))}else return e}const Ir=/^on[a-z]/,To=(t,e,i,s,r=!1,n,o,h,f)=>{e==="class"?mo(t,s,r):e==="style"?_o(t,i,s):Ae(e)?ri(e)||Io(t,e,i,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Oo(t,e,s,r))?go(t,e,s,n,o,h,f):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),xo(t,e,s,r))};function Oo(t,e,i,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&Ir.test(e)&&O(i)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Ir.test(e)&&W(i)?!1:e in t}const Dr=t=>{const e=t.props["onUpdate:modelValue"];return T(e)?i=>Te(e,i):e},ga={deep:!0,created(t,{value:e,modifiers:{number:i}},s){const r=be(e);br(t,"change",()=>{const n=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?ls(je(o)):je(o));t._assign(t.multiple?r?new Set(n):n:n[0])}),t._assign=Dr(s)},mounted(t,{value:e}){Er(t,e)},beforeUpdate(t,e,i){t._assign=Dr(i)},updated(t,{value:e}){Er(t,e)}};function Er(t,e){const i=t.multiple;if(!(i&&!T(e)&&!be(e))){for(let s=0,r=t.options.length;s<r;s++){const n=t.options[s],o=je(n);if(i)T(e)?n.selected=mn(e,o)>-1:n.selected=e.has(o);else if(Se(je(n),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function je(t){return"_value"in t?t._value:t.value}const Fo=j({patchProp:To},po);let Nr;function yo(){return Nr||(Nr=Lh(Fo))}const Sa=(...t)=>{const e=yo().createApp(...t),{mount:i}=e;return e.mount=s=>{const r=Mo(s);if(!r)return;const n=e._component;!O(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.innerHTML="";const o=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Mo(t){return W(t)?document.querySelector(t):t}var pt=function(){this.state=new Array(8);for(var t=0;t<this.state.length;t++)this.state[t]=64};pt.BUTTON_A=0;pt.BUTTON_B=1;pt.BUTTON_SELECT=2;pt.BUTTON_START=3;pt.BUTTON_UP=4;pt.BUTTON_DOWN=5;pt.BUTTON_LEFT=6;pt.BUTTON_RIGHT=7;pt.prototype={buttonDown:function(t){this.state[t]=65},buttonUp:function(t){this.state[t]=64}};var Tr=pt,Wi={copyArrayElements:function(t,e,i,s,r){for(var n=0;n<r;++n)i[s+n]=t[e+n]},copyArray:function(t){return t.slice(0)},fromJSON:function(t,e){for(var i=0;i<t.JSON_PROPERTIES.length;i++)t[t.JSON_PROPERTIES[i]]=e[t.JSON_PROPERTIES[i]]},toJSON:function(t){for(var e={},i=0;i<t.JSON_PROPERTIES.length;i++)e[t.JSON_PROPERTIES[i]]=t[t.JSON_PROPERTIES[i]];return e}},Or=Wi,Fr=function(t){this.nes=t,this.mem=null,this.REG_ACC=null,this.REG_X=null,this.REG_Y=null,this.REG_SP=null,this.REG_PC=null,this.REG_PC_NEW=null,this.REG_STATUS=null,this.F_CARRY=null,this.F_DECIMAL=null,this.F_INTERRUPT=null,this.F_INTERRUPT_NEW=null,this.F_OVERFLOW=null,this.F_SIGN=null,this.F_ZERO=null,this.F_NOTUSED=null,this.F_NOTUSED_NEW=null,this.F_BRK=null,this.F_BRK_NEW=null,this.opdata=null,this.cyclesToHalt=null,this.crash=null,this.irqRequested=null,this.irqType=null,this.reset()};Fr.prototype={IRQ_NORMAL:0,IRQ_NMI:1,IRQ_RESET:2,reset:function(){this.mem=new Array(65536);for(var t=0;t<8192;t++)this.mem[t]=255;for(var e=0;e<4;e++){var i=e*2048;this.mem[i+8]=247,this.mem[i+9]=239,this.mem[i+10]=223,this.mem[i+15]=191}for(var s=8193;s<this.mem.length;s++)this.mem[s]=0;this.REG_ACC=0,this.REG_X=0,this.REG_Y=0,this.REG_SP=511,this.REG_PC=32768-1,this.REG_PC_NEW=32768-1,this.REG_STATUS=40,this.setStatus(40),this.F_CARRY=0,this.F_DECIMAL=0,this.F_INTERRUPT=1,this.F_INTERRUPT_NEW=1,this.F_OVERFLOW=0,this.F_SIGN=0,this.F_ZERO=1,this.F_NOTUSED=1,this.F_NOTUSED_NEW=1,this.F_BRK=1,this.F_BRK_NEW=1,this.opdata=new yr().opdata,this.cyclesToHalt=0,this.crash=!1,this.irqRequested=!1,this.irqType=null},emulate:function(){var t,e;if(this.irqRequested){switch(t=this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7,this.REG_PC_NEW=this.REG_PC,this.F_INTERRUPT_NEW=this.F_INTERRUPT,this.irqType){case 0:{if(this.F_INTERRUPT!==0)break;this.doIrq(t);break}case 1:{this.doNonMaskableInterrupt(t);break}case 2:{this.doResetInterrupt();break}}this.REG_PC=this.REG_PC_NEW,this.F_INTERRUPT=this.F_INTERRUPT_NEW,this.F_BRK=this.F_BRK_NEW,this.irqRequested=!1}var i=this.opdata[this.nes.mmap.load(this.REG_PC+1)],s=i>>24,r=0,n=i>>8&255,o=this.REG_PC;this.REG_PC+=i>>16&255;var h=0;switch(n){case 0:{h=this.load(o+2);break}case 1:{h=this.load(o+2),h<128?h+=this.REG_PC:h+=this.REG_PC-256;break}case 2:break;case 3:{h=this.load16bit(o+2);break}case 4:{h=this.REG_ACC;break}case 5:{h=this.REG_PC;break}case 6:{h=this.load(o+2)+this.REG_X&255;break}case 7:{h=this.load(o+2)+this.REG_Y&255;break}case 8:{h=this.load16bit(o+2),(h&65280)!=(h+this.REG_X&65280)&&(r=1),h+=this.REG_X;break}case 9:{h=this.load16bit(o+2),(h&65280)!=(h+this.REG_Y&65280)&&(r=1),h+=this.REG_Y;break}case 10:{h=this.load(o+2),(h&65280)!=(h+this.REG_X&65280)&&(r=1),h+=this.REG_X,h&=255,h=this.load16bit(h);break}case 11:{h=this.load16bit(this.load(o+2)),(h&65280)!=(h+this.REG_Y&65280)&&(r=1),h+=this.REG_Y;break}case 12:{h=this.load16bit(o+2),h<8191?h=this.mem[h]+(this.mem[h&65280|(h&255)+1&255]<<8):h=this.nes.mmap.load(h)+(this.nes.mmap.load(h&65280|(h&255)+1&255)<<8);break}}switch(h&=65535,i&255){case 0:{t=this.REG_ACC+this.load(h)+this.F_CARRY,((this.REG_ACC^this.load(h))&128)==0&&((this.REG_ACC^t)&128)!=0?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t>255?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=t&255,this.REG_ACC=t&255,s+=r;break}case 1:{this.REG_ACC=this.REG_ACC&this.load(h),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,n!==11&&(s+=r);break}case 2:{n===4?(this.F_CARRY=this.REG_ACC>>7&1,this.REG_ACC=this.REG_ACC<<1&255,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC):(t=this.load(h),this.F_CARRY=t>>7&1,t=t<<1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(h,t));break}case 3:{this.F_CARRY===0&&(s+=(o&65280)!=(h&65280)?2:1,this.REG_PC=h);break}case 4:{this.F_CARRY===1&&(s+=(o&65280)!=(h&65280)?2:1,this.REG_PC=h);break}case 5:{this.F_ZERO===0&&(s+=(o&65280)!=(h&65280)?2:1,this.REG_PC=h);break}case 6:{t=this.load(h),this.F_SIGN=t>>7&1,this.F_OVERFLOW=t>>6&1,t&=this.REG_ACC,this.F_ZERO=t;break}case 7:{this.F_SIGN===1&&(s++,this.REG_PC=h);break}case 8:{this.F_ZERO!==0&&(s+=(o&65280)!=(h&65280)?2:1,this.REG_PC=h);break}case 9:{this.F_SIGN===0&&(s+=(o&65280)!=(h&65280)?2:1,this.REG_PC=h);break}case 10:{this.REG_PC+=2,this.push(this.REG_PC>>8&255),this.push(this.REG_PC&255),this.F_BRK=1,this.push(this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7),this.F_INTERRUPT=1,this.REG_PC=this.load16bit(65534),this.REG_PC--;break}case 11:{this.F_OVERFLOW===0&&(s+=(o&65280)!=(h&65280)?2:1,this.REG_PC=h);break}case 12:{this.F_OVERFLOW===1&&(s+=(o&65280)!=(h&65280)?2:1,this.REG_PC=h);break}case 13:{this.F_CARRY=0;break}case 14:{this.F_DECIMAL=0;break}case 15:{this.F_INTERRUPT=0;break}case 16:{this.F_OVERFLOW=0;break}case 17:{t=this.REG_ACC-this.load(h),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=t&255,s+=r;break}case 18:{t=this.REG_X-this.load(h),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=t&255;break}case 19:{t=this.REG_Y-this.load(h),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=t&255;break}case 20:{t=this.load(h)-1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(h,t);break}case 21:{this.REG_X=this.REG_X-1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break}case 22:{this.REG_Y=this.REG_Y-1&255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break}case 23:{this.REG_ACC=(this.load(h)^this.REG_ACC)&255,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,s+=r;break}case 24:{t=this.load(h)+1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(h,t&255);break}case 25:{this.REG_X=this.REG_X+1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break}case 26:{this.REG_Y++,this.REG_Y&=255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break}case 27:{this.REG_PC=h-1;break}case 28:{this.push(this.REG_PC>>8&255),this.push(this.REG_PC&255),this.REG_PC=h-1;break}case 29:{this.REG_ACC=this.load(h),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,s+=r;break}case 30:{this.REG_X=this.load(h),this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X,s+=r;break}case 31:{this.REG_Y=this.load(h),this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y,s+=r;break}case 32:{n===4?(t=this.REG_ACC&255,this.F_CARRY=t&1,t>>=1,this.REG_ACC=t):(t=this.load(h)&255,this.F_CARRY=t&1,t>>=1,this.write(h,t)),this.F_SIGN=0,this.F_ZERO=t;break}case 33:break;case 34:{t=(this.load(h)|this.REG_ACC)&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.REG_ACC=t,n!==11&&(s+=r);break}case 35:{this.push(this.REG_ACC);break}case 36:{this.F_BRK=1,this.push(this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7);break}case 37:{this.REG_ACC=this.pull(),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break}case 38:{t=this.pull(),this.F_CARRY=t&1,this.F_ZERO=(t>>1&1)==1?0:1,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1,this.F_NOTUSED=1;break}case 39:{n===4?(t=this.REG_ACC,e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.REG_ACC=t):(t=this.load(h),e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.write(h,t)),this.F_SIGN=t>>7&1,this.F_ZERO=t;break}case 40:{n===4?(e=this.F_CARRY<<7,this.F_CARRY=this.REG_ACC&1,t=(this.REG_ACC>>1)+e,this.REG_ACC=t):(t=this.load(h),e=this.F_CARRY<<7,this.F_CARRY=t&1,t=(t>>1)+e,this.write(h,t)),this.F_SIGN=t>>7&1,this.F_ZERO=t;break}case 41:{if(t=this.pull(),this.F_CARRY=t&1,this.F_ZERO=(t>>1&1)==0?1:0,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1,this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,this.REG_PC===65535)return;this.REG_PC--,this.F_NOTUSED=1;break}case 42:{if(this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,this.REG_PC===65535)return;break}case 43:{t=this.REG_ACC-this.load(h)-(1-this.F_CARRY),this.F_SIGN=t>>7&1,this.F_ZERO=t&255,((this.REG_ACC^t)&128)!=0&&((this.REG_ACC^this.load(h))&128)!=0?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_ACC=t&255,n!==11&&(s+=r);break}case 44:{this.F_CARRY=1;break}case 45:{this.F_DECIMAL=1;break}case 46:{this.F_INTERRUPT=1;break}case 47:{this.write(h,this.REG_ACC);break}case 48:{this.write(h,this.REG_X);break}case 49:{this.write(h,this.REG_Y);break}case 50:{this.REG_X=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break}case 51:{this.REG_Y=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break}case 52:{this.REG_X=this.REG_SP-256,this.F_SIGN=this.REG_SP>>7&1,this.F_ZERO=this.REG_X;break}case 53:{this.REG_ACC=this.REG_X,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break}case 54:{this.REG_SP=this.REG_X+256,this.stackWrap();break}case 55:{this.REG_ACC=this.REG_Y,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break}case 56:{t=this.REG_ACC&this.load(h),this.F_CARRY=t&1,this.REG_ACC=this.F_ZERO=t>>1,this.F_SIGN=0;break}case 57:{this.REG_ACC=this.F_ZERO=this.REG_ACC&this.load(h),this.F_CARRY=this.F_SIGN=this.REG_ACC>>7&1;break}case 58:{t=this.REG_ACC&this.load(h),this.REG_ACC=this.F_ZERO=(t>>1)+(this.F_CARRY<<7),this.F_SIGN=this.F_CARRY,this.F_CARRY=t>>7&1,this.F_OVERFLOW=(t>>7^t>>6)&1;break}case 59:{t=(this.REG_X&this.REG_ACC)-this.load(h),this.F_SIGN=t>>7&1,this.F_ZERO=t&255,((this.REG_X^t)&128)!=0&&((this.REG_X^this.load(h))&128)!=0?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_X=t&255;break}case 60:{this.REG_ACC=this.REG_X=this.F_ZERO=this.load(h),this.F_SIGN=this.REG_ACC>>7&1,s+=r;break}case 61:{this.write(h,this.REG_ACC&this.REG_X);break}case 62:{t=this.load(h)-1&255,this.write(h,t),t=this.REG_ACC-t,this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=t&255,n!==11&&(s+=r);break}case 63:{t=this.load(h)+1&255,this.write(h,t),t=this.REG_ACC-t-(1-this.F_CARRY),this.F_SIGN=t>>7&1,this.F_ZERO=t&255,((this.REG_ACC^t)&128)!=0&&((this.REG_ACC^this.load(h))&128)!=0?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_ACC=t&255,n!==11&&(s+=r);break}case 64:{t=this.load(h),e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.write(h,t),this.REG_ACC=this.REG_ACC&t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,n!==11&&(s+=r);break}case 65:{t=this.load(h),e=this.F_CARRY<<7,this.F_CARRY=t&1,t=(t>>1)+e,this.write(h,t),t=this.REG_ACC+this.load(h)+this.F_CARRY,((this.REG_ACC^this.load(h))&128)==0&&((this.REG_ACC^t)&128)!=0?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t>255?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=t&255,this.REG_ACC=t&255,n!==11&&(s+=r);break}case 66:{t=this.load(h),this.F_CARRY=t>>7&1,t=t<<1&255,this.write(h,t),this.REG_ACC=this.REG_ACC|t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,n!==11&&(s+=r);break}case 67:{t=this.load(h)&255,this.F_CARRY=t&1,t>>=1,this.write(h,t),this.REG_ACC=this.REG_ACC^t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,n!==11&&(s+=r);break}case 68:break;case 69:{this.load(h),n!==11&&(s+=r);break}default:{this.nes.stop(),this.nes.crashMessage="Game crashed, invalid opcode at address $"+o.toString(16);break}}return s},load:function(t){return t<8192?this.mem[t&2047]:this.nes.mmap.load(t)},load16bit:function(t){return t<8191?this.mem[t&2047]|this.mem[t+1&2047]<<8:this.nes.mmap.load(t)|this.nes.mmap.load(t+1)<<8},write:function(t,e){t<8192?this.mem[t&2047]=e:this.nes.mmap.write(t,e)},requestIrq:function(t){this.irqRequested&&t===this.IRQ_NORMAL||(this.irqRequested=!0,this.irqType=t)},push:function(t){this.nes.mmap.write(this.REG_SP,t),this.REG_SP--,this.REG_SP=256|this.REG_SP&255},stackWrap:function(){this.REG_SP=256|this.REG_SP&255},pull:function(){return this.REG_SP++,this.REG_SP=256|this.REG_SP&255,this.nes.mmap.load(this.REG_SP)},pageCrossed:function(t,e){return(t&65280)!=(e&65280)},haltCycles:function(t){this.cyclesToHalt+=t},doNonMaskableInterrupt:function(t){(this.nes.mmap.load(8192)&128)!=0&&(this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(this.REG_PC_NEW&255),this.push(t),this.REG_PC_NEW=this.nes.mmap.load(65530)|this.nes.mmap.load(65531)<<8,this.REG_PC_NEW--)},doResetInterrupt:function(){this.REG_PC_NEW=this.nes.mmap.load(65532)|this.nes.mmap.load(65533)<<8,this.REG_PC_NEW--},doIrq:function(t){this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(this.REG_PC_NEW&255),this.push(t),this.F_INTERRUPT_NEW=1,this.F_BRK_NEW=0,this.REG_PC_NEW=this.nes.mmap.load(65534)|this.nes.mmap.load(65535)<<8,this.REG_PC_NEW--},getStatus:function(){return this.F_CARRY|this.F_ZERO<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7},setStatus:function(t){this.F_CARRY=t&1,this.F_ZERO=t>>1&1,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1},JSON_PROPERTIES:["mem","cyclesToHalt","irqRequested","irqType","REG_ACC","REG_X","REG_Y","REG_SP","REG_PC","REG_PC_NEW","REG_STATUS","F_CARRY","F_DECIMAL","F_INTERRUPT","F_INTERRUPT_NEW","F_OVERFLOW","F_SIGN","F_ZERO","F_NOTUSED","F_NOTUSED_NEW","F_BRK","F_BRK_NEW"],toJSON:function(){return Or.toJSON(this)},fromJSON:function(t){Or.fromJSON(this,t)}};var yr=function(){this.opdata=new Array(256);for(var t=0;t<256;t++)this.opdata[t]=255;this.setOp(this.INS_ADC,105,this.ADDR_IMM,2,2),this.setOp(this.INS_ADC,101,this.ADDR_ZP,2,3),this.setOp(this.INS_ADC,117,this.ADDR_ZPX,2,4),this.setOp(this.INS_ADC,109,this.ADDR_ABS,3,4),this.setOp(this.INS_ADC,125,this.ADDR_ABSX,3,4),this.setOp(this.INS_ADC,121,this.ADDR_ABSY,3,4),this.setOp(this.INS_ADC,97,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ADC,113,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_AND,41,this.ADDR_IMM,2,2),this.setOp(this.INS_AND,37,this.ADDR_ZP,2,3),this.setOp(this.INS_AND,53,this.ADDR_ZPX,2,4),this.setOp(this.INS_AND,45,this.ADDR_ABS,3,4),this.setOp(this.INS_AND,61,this.ADDR_ABSX,3,4),this.setOp(this.INS_AND,57,this.ADDR_ABSY,3,4),this.setOp(this.INS_AND,33,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_AND,49,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_ASL,10,this.ADDR_ACC,1,2),this.setOp(this.INS_ASL,6,this.ADDR_ZP,2,5),this.setOp(this.INS_ASL,22,this.ADDR_ZPX,2,6),this.setOp(this.INS_ASL,14,this.ADDR_ABS,3,6),this.setOp(this.INS_ASL,30,this.ADDR_ABSX,3,7),this.setOp(this.INS_BCC,144,this.ADDR_REL,2,2),this.setOp(this.INS_BCS,176,this.ADDR_REL,2,2),this.setOp(this.INS_BEQ,240,this.ADDR_REL,2,2),this.setOp(this.INS_BIT,36,this.ADDR_ZP,2,3),this.setOp(this.INS_BIT,44,this.ADDR_ABS,3,4),this.setOp(this.INS_BMI,48,this.ADDR_REL,2,2),this.setOp(this.INS_BNE,208,this.ADDR_REL,2,2),this.setOp(this.INS_BPL,16,this.ADDR_REL,2,2),this.setOp(this.INS_BRK,0,this.ADDR_IMP,1,7),this.setOp(this.INS_BVC,80,this.ADDR_REL,2,2),this.setOp(this.INS_BVS,112,this.ADDR_REL,2,2),this.setOp(this.INS_CLC,24,this.ADDR_IMP,1,2),this.setOp(this.INS_CLD,216,this.ADDR_IMP,1,2),this.setOp(this.INS_CLI,88,this.ADDR_IMP,1,2),this.setOp(this.INS_CLV,184,this.ADDR_IMP,1,2),this.setOp(this.INS_CMP,201,this.ADDR_IMM,2,2),this.setOp(this.INS_CMP,197,this.ADDR_ZP,2,3),this.setOp(this.INS_CMP,213,this.ADDR_ZPX,2,4),this.setOp(this.INS_CMP,205,this.ADDR_ABS,3,4),this.setOp(this.INS_CMP,221,this.ADDR_ABSX,3,4),this.setOp(this.INS_CMP,217,this.ADDR_ABSY,3,4),this.setOp(this.INS_CMP,193,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_CMP,209,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_CPX,224,this.ADDR_IMM,2,2),this.setOp(this.INS_CPX,228,this.ADDR_ZP,2,3),this.setOp(this.INS_CPX,236,this.ADDR_ABS,3,4),this.setOp(this.INS_CPY,192,this.ADDR_IMM,2,2),this.setOp(this.INS_CPY,196,this.ADDR_ZP,2,3),this.setOp(this.INS_CPY,204,this.ADDR_ABS,3,4),this.setOp(this.INS_DEC,198,this.ADDR_ZP,2,5),this.setOp(this.INS_DEC,214,this.ADDR_ZPX,2,6),this.setOp(this.INS_DEC,206,this.ADDR_ABS,3,6),this.setOp(this.INS_DEC,222,this.ADDR_ABSX,3,7),this.setOp(this.INS_DEX,202,this.ADDR_IMP,1,2),this.setOp(this.INS_DEY,136,this.ADDR_IMP,1,2),this.setOp(this.INS_EOR,73,this.ADDR_IMM,2,2),this.setOp(this.INS_EOR,69,this.ADDR_ZP,2,3),this.setOp(this.INS_EOR,85,this.ADDR_ZPX,2,4),this.setOp(this.INS_EOR,77,this.ADDR_ABS,3,4),this.setOp(this.INS_EOR,93,this.ADDR_ABSX,3,4),this.setOp(this.INS_EOR,89,this.ADDR_ABSY,3,4),this.setOp(this.INS_EOR,65,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_EOR,81,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_INC,230,this.ADDR_ZP,2,5),this.setOp(this.INS_INC,246,this.ADDR_ZPX,2,6),this.setOp(this.INS_INC,238,this.ADDR_ABS,3,6),this.setOp(this.INS_INC,254,this.ADDR_ABSX,3,7),this.setOp(this.INS_INX,232,this.ADDR_IMP,1,2),this.setOp(this.INS_INY,200,this.ADDR_IMP,1,2),this.setOp(this.INS_JMP,76,this.ADDR_ABS,3,3),this.setOp(this.INS_JMP,108,this.ADDR_INDABS,3,5),this.setOp(this.INS_JSR,32,this.ADDR_ABS,3,6),this.setOp(this.INS_LDA,169,this.ADDR_IMM,2,2),this.setOp(this.INS_LDA,165,this.ADDR_ZP,2,3),this.setOp(this.INS_LDA,181,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDA,173,this.ADDR_ABS,3,4),this.setOp(this.INS_LDA,189,this.ADDR_ABSX,3,4),this.setOp(this.INS_LDA,185,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDA,161,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LDA,177,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LDX,162,this.ADDR_IMM,2,2),this.setOp(this.INS_LDX,166,this.ADDR_ZP,2,3),this.setOp(this.INS_LDX,182,this.ADDR_ZPY,2,4),this.setOp(this.INS_LDX,174,this.ADDR_ABS,3,4),this.setOp(this.INS_LDX,190,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDY,160,this.ADDR_IMM,2,2),this.setOp(this.INS_LDY,164,this.ADDR_ZP,2,3),this.setOp(this.INS_LDY,180,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDY,172,this.ADDR_ABS,3,4),this.setOp(this.INS_LDY,188,this.ADDR_ABSX,3,4),this.setOp(this.INS_LSR,74,this.ADDR_ACC,1,2),this.setOp(this.INS_LSR,70,this.ADDR_ZP,2,5),this.setOp(this.INS_LSR,86,this.ADDR_ZPX,2,6),this.setOp(this.INS_LSR,78,this.ADDR_ABS,3,6),this.setOp(this.INS_LSR,94,this.ADDR_ABSX,3,7),this.setOp(this.INS_NOP,26,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,58,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,90,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,122,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,218,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,234,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,250,this.ADDR_IMP,1,2),this.setOp(this.INS_ORA,9,this.ADDR_IMM,2,2),this.setOp(this.INS_ORA,5,this.ADDR_ZP,2,3),this.setOp(this.INS_ORA,21,this.ADDR_ZPX,2,4),this.setOp(this.INS_ORA,13,this.ADDR_ABS,3,4),this.setOp(this.INS_ORA,29,this.ADDR_ABSX,3,4),this.setOp(this.INS_ORA,25,this.ADDR_ABSY,3,4),this.setOp(this.INS_ORA,1,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ORA,17,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_PHA,72,this.ADDR_IMP,1,3),this.setOp(this.INS_PHP,8,this.ADDR_IMP,1,3),this.setOp(this.INS_PLA,104,this.ADDR_IMP,1,4),this.setOp(this.INS_PLP,40,this.ADDR_IMP,1,4),this.setOp(this.INS_ROL,42,this.ADDR_ACC,1,2),this.setOp(this.INS_ROL,38,this.ADDR_ZP,2,5),this.setOp(this.INS_ROL,54,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROL,46,this.ADDR_ABS,3,6),this.setOp(this.INS_ROL,62,this.ADDR_ABSX,3,7),this.setOp(this.INS_ROR,106,this.ADDR_ACC,1,2),this.setOp(this.INS_ROR,102,this.ADDR_ZP,2,5),this.setOp(this.INS_ROR,118,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROR,110,this.ADDR_ABS,3,6),this.setOp(this.INS_ROR,126,this.ADDR_ABSX,3,7),this.setOp(this.INS_RTI,64,this.ADDR_IMP,1,6),this.setOp(this.INS_RTS,96,this.ADDR_IMP,1,6),this.setOp(this.INS_SBC,233,this.ADDR_IMM,2,2),this.setOp(this.INS_SBC,229,this.ADDR_ZP,2,3),this.setOp(this.INS_SBC,245,this.ADDR_ZPX,2,4),this.setOp(this.INS_SBC,237,this.ADDR_ABS,3,4),this.setOp(this.INS_SBC,253,this.ADDR_ABSX,3,4),this.setOp(this.INS_SBC,249,this.ADDR_ABSY,3,4),this.setOp(this.INS_SBC,225,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SBC,241,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_SEC,56,this.ADDR_IMP,1,2),this.setOp(this.INS_SED,248,this.ADDR_IMP,1,2),this.setOp(this.INS_SEI,120,this.ADDR_IMP,1,2),this.setOp(this.INS_STA,133,this.ADDR_ZP,2,3),this.setOp(this.INS_STA,149,this.ADDR_ZPX,2,4),this.setOp(this.INS_STA,141,this.ADDR_ABS,3,4),this.setOp(this.INS_STA,157,this.ADDR_ABSX,3,5),this.setOp(this.INS_STA,153,this.ADDR_ABSY,3,5),this.setOp(this.INS_STA,129,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_STA,145,this.ADDR_POSTIDXIND,2,6),this.setOp(this.INS_STX,134,this.ADDR_ZP,2,3),this.setOp(this.INS_STX,150,this.ADDR_ZPY,2,4),this.setOp(this.INS_STX,142,this.ADDR_ABS,3,4),this.setOp(this.INS_STY,132,this.ADDR_ZP,2,3),this.setOp(this.INS_STY,148,this.ADDR_ZPX,2,4),this.setOp(this.INS_STY,140,this.ADDR_ABS,3,4),this.setOp(this.INS_TAX,170,this.ADDR_IMP,1,2),this.setOp(this.INS_TAY,168,this.ADDR_IMP,1,2),this.setOp(this.INS_TSX,186,this.ADDR_IMP,1,2),this.setOp(this.INS_TXA,138,this.ADDR_IMP,1,2),this.setOp(this.INS_TXS,154,this.ADDR_IMP,1,2),this.setOp(this.INS_TYA,152,this.ADDR_IMP,1,2),this.setOp(this.INS_ALR,75,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,11,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,43,this.ADDR_IMM,2,2),this.setOp(this.INS_ARR,107,this.ADDR_IMM,2,2),this.setOp(this.INS_AXS,203,this.ADDR_IMM,2,2),this.setOp(this.INS_LAX,163,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LAX,167,this.ADDR_ZP,2,3),this.setOp(this.INS_LAX,175,this.ADDR_ABS,3,4),this.setOp(this.INS_LAX,179,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LAX,183,this.ADDR_ZPY,2,4),this.setOp(this.INS_LAX,191,this.ADDR_ABSY,3,4),this.setOp(this.INS_SAX,131,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SAX,135,this.ADDR_ZP,2,3),this.setOp(this.INS_SAX,143,this.ADDR_ABS,3,4),this.setOp(this.INS_SAX,151,this.ADDR_ZPY,2,4),this.setOp(this.INS_DCP,195,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_DCP,199,this.ADDR_ZP,2,5),this.setOp(this.INS_DCP,207,this.ADDR_ABS,3,6),this.setOp(this.INS_DCP,211,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_DCP,215,this.ADDR_ZPX,2,6),this.setOp(this.INS_DCP,219,this.ADDR_ABSY,3,7),this.setOp(this.INS_DCP,223,this.ADDR_ABSX,3,7),this.setOp(this.INS_ISC,227,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_ISC,231,this.ADDR_ZP,2,5),this.setOp(this.INS_ISC,239,this.ADDR_ABS,3,6),this.setOp(this.INS_ISC,243,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_ISC,247,this.ADDR_ZPX,2,6),this.setOp(this.INS_ISC,251,this.ADDR_ABSY,3,7),this.setOp(this.INS_ISC,255,this.ADDR_ABSX,3,7),this.setOp(this.INS_RLA,35,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RLA,39,this.ADDR_ZP,2,5),this.setOp(this.INS_RLA,47,this.ADDR_ABS,3,6),this.setOp(this.INS_RLA,51,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RLA,55,this.ADDR_ZPX,2,6),this.setOp(this.INS_RLA,59,this.ADDR_ABSY,3,7),this.setOp(this.INS_RLA,63,this.ADDR_ABSX,3,7),this.setOp(this.INS_RRA,99,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RRA,103,this.ADDR_ZP,2,5),this.setOp(this.INS_RRA,111,this.ADDR_ABS,3,6),this.setOp(this.INS_RRA,115,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RRA,119,this.ADDR_ZPX,2,6),this.setOp(this.INS_RRA,123,this.ADDR_ABSY,3,7),this.setOp(this.INS_RRA,127,this.ADDR_ABSX,3,7),this.setOp(this.INS_SLO,3,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SLO,7,this.ADDR_ZP,2,5),this.setOp(this.INS_SLO,15,this.ADDR_ABS,3,6),this.setOp(this.INS_SLO,19,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SLO,23,this.ADDR_ZPX,2,6),this.setOp(this.INS_SLO,27,this.ADDR_ABSY,3,7),this.setOp(this.INS_SLO,31,this.ADDR_ABSX,3,7),this.setOp(this.INS_SRE,67,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SRE,71,this.ADDR_ZP,2,5),this.setOp(this.INS_SRE,79,this.ADDR_ABS,3,6),this.setOp(this.INS_SRE,83,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SRE,87,this.ADDR_ZPX,2,6),this.setOp(this.INS_SRE,91,this.ADDR_ABSY,3,7),this.setOp(this.INS_SRE,95,this.ADDR_ABSX,3,7),this.setOp(this.INS_SKB,128,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,130,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,137,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,194,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,226,this.ADDR_IMM,2,2),this.setOp(this.INS_IGN,12,this.ADDR_ABS,3,4),this.setOp(this.INS_IGN,28,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,60,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,92,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,124,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,220,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,252,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,4,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,68,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,100,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,20,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,52,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,84,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,116,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,212,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,244,this.ADDR_ZPX,2,4),this.cycTable=new Array(7,6,2,8,3,3,5,5,3,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,3,2,2,2,3,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,5,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,6,2,6,4,4,4,4,2,5,2,5,5,5,5,5,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,5,2,5,4,4,4,4,2,4,2,4,4,4,4,4,2,6,2,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,3,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7),this.instname=new Array(70),this.instname[0]="ADC",this.instname[1]="AND",this.instname[2]="ASL",this.instname[3]="BCC",this.instname[4]="BCS",this.instname[5]="BEQ",this.instname[6]="BIT",this.instname[7]="BMI",this.instname[8]="BNE",this.instname[9]="BPL",this.instname[10]="BRK",this.instname[11]="BVC",this.instname[12]="BVS",this.instname[13]="CLC",this.instname[14]="CLD",this.instname[15]="CLI",this.instname[16]="CLV",this.instname[17]="CMP",this.instname[18]="CPX",this.instname[19]="CPY",this.instname[20]="DEC",this.instname[21]="DEX",this.instname[22]="DEY",this.instname[23]="EOR",this.instname[24]="INC",this.instname[25]="INX",this.instname[26]="INY",this.instname[27]="JMP",this.instname[28]="JSR",this.instname[29]="LDA",this.instname[30]="LDX",this.instname[31]="LDY",this.instname[32]="LSR",this.instname[33]="NOP",this.instname[34]="ORA",this.instname[35]="PHA",this.instname[36]="PHP",this.instname[37]="PLA",this.instname[38]="PLP",this.instname[39]="ROL",this.instname[40]="ROR",this.instname[41]="RTI",this.instname[42]="RTS",this.instname[43]="SBC",this.instname[44]="SEC",this.instname[45]="SED",this.instname[46]="SEI",this.instname[47]="STA",this.instname[48]="STX",this.instname[49]="STY",this.instname[50]="TAX",this.instname[51]="TAY",this.instname[52]="TSX",this.instname[53]="TXA",this.instname[54]="TXS",this.instname[55]="TYA",this.instname[56]="ALR",this.instname[57]="ANC",this.instname[58]="ARR",this.instname[59]="AXS",this.instname[60]="LAX",this.instname[61]="SAX",this.instname[62]="DCP",this.instname[63]="ISC",this.instname[64]="RLA",this.instname[65]="RRA",this.instname[66]="SLO",this.instname[67]="SRE",this.instname[68]="SKB",this.instname[69]="IGN",this.addrDesc=new Array("Zero Page           ","Relative            ","Implied             ","Absolute            ","Accumulator         ","Immediate           ","Zero Page,X         ","Zero Page,Y         ","Absolute,X          ","Absolute,Y          ","Preindexed Indirect ","Postindexed Indirect","Indirect Absolute   ")};yr.prototype={INS_ADC:0,INS_AND:1,INS_ASL:2,INS_BCC:3,INS_BCS:4,INS_BEQ:5,INS_BIT:6,INS_BMI:7,INS_BNE:8,INS_BPL:9,INS_BRK:10,INS_BVC:11,INS_BVS:12,INS_CLC:13,INS_CLD:14,INS_CLI:15,INS_CLV:16,INS_CMP:17,INS_CPX:18,INS_CPY:19,INS_DEC:20,INS_DEX:21,INS_DEY:22,INS_EOR:23,INS_INC:24,INS_INX:25,INS_INY:26,INS_JMP:27,INS_JSR:28,INS_LDA:29,INS_LDX:30,INS_LDY:31,INS_LSR:32,INS_NOP:33,INS_ORA:34,INS_PHA:35,INS_PHP:36,INS_PLA:37,INS_PLP:38,INS_ROL:39,INS_ROR:40,INS_RTI:41,INS_RTS:42,INS_SBC:43,INS_SEC:44,INS_SED:45,INS_SEI:46,INS_STA:47,INS_STX:48,INS_STY:49,INS_TAX:50,INS_TAY:51,INS_TSX:52,INS_TXA:53,INS_TXS:54,INS_TYA:55,INS_ALR:56,INS_ANC:57,INS_ARR:58,INS_AXS:59,INS_LAX:60,INS_SAX:61,INS_DCP:62,INS_ISC:63,INS_RLA:64,INS_RRA:65,INS_SLO:66,INS_SRE:67,INS_SKB:68,INS_IGN:69,INS_DUMMY:70,ADDR_ZP:0,ADDR_REL:1,ADDR_IMP:2,ADDR_ABS:3,ADDR_ACC:4,ADDR_IMM:5,ADDR_ZPX:6,ADDR_ZPY:7,ADDR_ABSX:8,ADDR_ABSY:9,ADDR_PREIDXIND:10,ADDR_POSTIDXIND:11,ADDR_INDABS:12,setOp:function(t,e,i,s,r){this.opdata[e]=t&255|(i&255)<<8|(s&255)<<16|(r&255)<<24}};var Po=Fr,Mr=function(){this.pix=new Array(64),this.fbIndex=null,this.tIndex=null,this.x=null,this.y=null,this.w=null,this.h=null,this.incX=null,this.incY=null,this.palIndex=null,this.tpri=null,this.c=null,this.initialized=!1,this.opaque=new Array(8)};Mr.prototype={setBuffer:function(t){for(this.y=0;this.y<8;this.y++)this.setScanline(this.y,t[this.y],t[this.y+8])},setScanline:function(t,e,i){for(this.initialized=!0,this.tIndex=t<<3,this.x=0;this.x<8;this.x++)this.pix[this.tIndex+this.x]=(e>>7-this.x&1)+((i>>7-this.x&1)<<1),this.pix[this.tIndex+this.x]===0&&(this.opaque[t]=!1)},render:function(t,e,i,s,r,n,o,h,f,u,R,S,b){if(!(n<-7||n>=256||o<-7||o>=240))if(this.w=s-e,this.h=r-i,n<0&&(e-=n),n+s>=256&&(s=256-n),o<0&&(i-=o),o+r>=240&&(r=240-o),!u&&!R)for(this.fbIndex=(o<<8)+n,this.tIndex=0,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<r&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&S<=(this.tpri&255)&&(t[this.fbIndex]=f[this.palIndex+h],this.tpri=this.tpri&3840|S,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256}else if(u&&!R)for(this.fbIndex=(o<<8)+n,this.tIndex=7,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<r&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&S<=(this.tpri&255)&&(t[this.fbIndex]=f[this.palIndex+h],this.tpri=this.tpri&3840|S,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256,this.tIndex+=16}else if(R&&!u)for(this.fbIndex=(o<<8)+n,this.tIndex=56,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<r&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&S<=(this.tpri&255)&&(t[this.fbIndex]=f[this.palIndex+h],this.tpri=this.tpri&3840|S,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256,this.tIndex-=16}else for(this.fbIndex=(o<<8)+n,this.tIndex=63,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<s&&this.y>=i&&this.y<r&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&S<=(this.tpri&255)&&(t[this.fbIndex]=f[this.palIndex+h],this.tpri=this.tpri&3840|S,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256}},isTransparent:function(t,e){return this.pix[(e<<3)+t]===0},toJSON:function(){return{opaque:this.opaque,pix:this.pix}},fromJSON:function(t){this.opaque=t.opaque,this.pix=t.pix}};var Pr=Mr,wo=Pr,wr=Wi,vr=function(t){this.nes=t,this.vramMem=null,this.spriteMem=null,this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=null,this.firstWrite=null,this.sramAddress=null,this.currentMirroring=null,this.requestEndFrame=null,this.nmiOk=null,this.dummyCycleToggle=null,this.validTileData=null,this.nmiCounter=null,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=null,this.f_spriteSize=null,this.f_bgPatternTable=null,this.f_spPatternTable=null,this.f_addrInc=null,this.f_nTblAddress=null,this.f_color=null,this.f_spVisibility=null,this.f_bgVisibility=null,this.f_spClipping=null,this.f_bgClipping=null,this.f_dispType=null,this.cntFV=null,this.cntV=null,this.cntH=null,this.cntVT=null,this.cntHT=null,this.regFV=null,this.regV=null,this.regH=null,this.regVT=null,this.regHT=null,this.regFH=null,this.regS=null,this.curNt=null,this.attrib=null,this.buffer=null,this.bgbuffer=null,this.pixrendered=null,this.validTileData=null,this.scantile=null,this.scanline=null,this.lastRenderedScanline=null,this.curX=null,this.sprX=null,this.sprY=null,this.sprTile=null,this.sprCol=null,this.vertFlip=null,this.horiFlip=null,this.bgPriority=null,this.spr0HitX=null,this.spr0HitY=null,this.hitSpr0=null,this.sprPalette=null,this.imgPalette=null,this.ptTile=null,this.ntable1=null,this.currentMirroring=null,this.nameTable=null,this.vramMirrorTable=null,this.palTable=null,this.showSpr0Hit=!1,this.clipToTvSize=!0,this.reset()};vr.prototype={STATUS_VRAMWRITE:4,STATUS_SLSPRITECOUNT:5,STATUS_SPRITE0HIT:6,STATUS_VBLANK:7,reset:function(){var t;for(this.vramMem=new Array(32768),this.spriteMem=new Array(256),t=0;t<this.vramMem.length;t++)this.vramMem[t]=0;for(t=0;t<this.spriteMem.length;t++)this.spriteMem[t]=0;for(this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=0,this.firstWrite=!0,this.sramAddress=0,this.currentMirroring=-1,this.requestEndFrame=!1,this.nmiOk=!1,this.dummyCycleToggle=!1,this.validTileData=!1,this.nmiCounter=0,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=0,this.f_spriteSize=0,this.f_bgPatternTable=0,this.f_spPatternTable=0,this.f_addrInc=0,this.f_nTblAddress=0,this.f_color=0,this.f_spVisibility=0,this.f_bgVisibility=0,this.f_spClipping=0,this.f_bgClipping=0,this.f_dispType=0,this.cntFV=0,this.cntV=0,this.cntH=0,this.cntVT=0,this.cntHT=0,this.regFV=0,this.regV=0,this.regH=0,this.regVT=0,this.regHT=0,this.regFH=0,this.regS=0,this.curNt=null,this.attrib=new Array(32),this.buffer=new Array(256*240),this.bgbuffer=new Array(256*240),this.pixrendered=new Array(256*240),this.validTileData=null,this.scantile=new Array(32),this.scanline=0,this.lastRenderedScanline=-1,this.curX=0,this.sprX=new Array(64),this.sprY=new Array(64),this.sprTile=new Array(64),this.sprCol=new Array(64),this.vertFlip=new Array(64),this.horiFlip=new Array(64),this.bgPriority=new Array(64),this.spr0HitX=0,this.spr0HitY=0,this.hitSpr0=!1,this.sprPalette=new Array(16),this.imgPalette=new Array(16),this.ptTile=new Array(512),t=0;t<512;t++)this.ptTile[t]=new wo;for(this.ntable1=new Array(4),this.currentMirroring=-1,this.nameTable=new Array(4),t=0;t<4;t++)this.nameTable[t]=new Lr(32,32,"Nt"+t);for(this.vramMirrorTable=new Array(32768),t=0;t<32768;t++)this.vramMirrorTable[t]=t;this.palTable=new kr,this.palTable.loadNTSCPalette(),this.updateControlReg1(0),this.updateControlReg2(0)},setMirroring:function(t){if(t!==this.currentMirroring){this.currentMirroring=t,this.triggerRendering(),this.vramMirrorTable===null&&(this.vramMirrorTable=new Array(32768));for(var e=0;e<32768;e++)this.vramMirrorTable[e]=e;this.defineMirrorRegion(16160,16128,32),this.defineMirrorRegion(16192,16128,32),this.defineMirrorRegion(16256,16128,32),this.defineMirrorRegion(16320,16128,32),this.defineMirrorRegion(12288,8192,3840),this.defineMirrorRegion(16384,0,16384),t===this.nes.rom.HORIZONTAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(11264,10240,1024)):t===this.nes.rom.VERTICAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=0,this.ntable1[3]=1,this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,9216,1024)):t===this.nes.rom.SINGLESCREEN_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=0,this.ntable1[3]=0,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,8192,1024)):t===this.nes.rom.SINGLESCREEN_MIRRORING2?(this.ntable1[0]=1,this.ntable1[1]=1,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,9216,1024),this.defineMirrorRegion(10240,9216,1024),this.defineMirrorRegion(11264,9216,1024)):(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=2,this.ntable1[3]=3)}},defineMirrorRegion:function(t,e,i){for(var s=0;s<i;s++)this.vramMirrorTable[t+s]=e+s},startVBlank:function(){this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI),this.lastRenderedScanline<239&&this.renderFramePartially(this.lastRenderedScanline+1,240-this.lastRenderedScanline),this.endFrame(),this.lastRenderedScanline=-1},endScanline:function(){switch(this.scanline){case 19:this.dummyCycleToggle&&(this.curX=1,this.dummyCycleToggle=!this.dummyCycleToggle);break;case 20:this.setStatusFlag(this.STATUS_VBLANK,!1),this.setStatusFlag(this.STATUS_SPRITE0HIT,!1),this.hitSpr0=!1,this.spr0HitX=-1,this.spr0HitY=-1,(this.f_bgVisibility===1||this.f_spVisibility===1)&&(this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.f_bgVisibility===1&&this.renderBgScanline(!1,0)),this.f_bgVisibility===1&&this.f_spVisibility===1&&this.checkSprite0(0),(this.f_bgVisibility===1||this.f_spVisibility===1)&&this.nes.mmap.clockIrqCounter();break;case 261:this.setStatusFlag(this.STATUS_VBLANK,!0),this.requestEndFrame=!0,this.nmiCounter=9,this.scanline=-1;break;default:this.scanline>=21&&this.scanline<=260&&(this.f_bgVisibility===1&&(this.scanlineAlreadyRendered||(this.cntHT=this.regHT,this.cntH=this.regH,this.renderBgScanline(!0,this.scanline+1-21)),this.scanlineAlreadyRendered=!1,!this.hitSpr0&&this.f_spVisibility===1&&this.sprX[0]>=-7&&this.sprX[0]<256&&this.sprY[0]+1<=this.scanline-20&&this.sprY[0]+1+(this.f_spriteSize===0?8:16)>=this.scanline-20&&this.checkSprite0(this.scanline-20)&&(this.hitSpr0=!0)),(this.f_bgVisibility===1||this.f_spVisibility===1)&&this.nes.mmap.clockIrqCounter())}this.scanline++,this.regsToAddress(),this.cntsToAddress()},startFrame:function(){var t=0;if(this.f_dispType===0)t=this.imgPalette[0];else switch(this.f_color){case 0:t=0;break;case 1:t=65280;break;case 2:t=16711680;break;case 3:t=0;break;case 4:t=255;break;default:t=0}var e=this.buffer,i;for(i=0;i<256*240;i++)e[i]=t;var s=this.pixrendered;for(i=0;i<s.length;i++)s[i]=65},endFrame:function(){var t,e,i,s=this.buffer;if(this.showSpr0Hit){if(this.sprX[0]>=0&&this.sprX[0]<256&&this.sprY[0]>=0&&this.sprY[0]<240){for(t=0;t<256;t++)s[(this.sprY[0]<<8)+t]=16733525;for(t=0;t<240;t++)s[(t<<8)+this.sprX[0]]=16733525}if(this.spr0HitX>=0&&this.spr0HitX<256&&this.spr0HitY>=0&&this.spr0HitY<240){for(t=0;t<256;t++)s[(this.spr0HitY<<8)+t]=5635925;for(t=0;t<240;t++)s[(t<<8)+this.spr0HitX]=5635925}}if(this.clipToTvSize||this.f_bgClipping===0||this.f_spClipping===0)for(i=0;i<240;i++)for(e=0;e<8;e++)s[(i<<8)+e]=0;if(this.clipToTvSize)for(i=0;i<240;i++)for(e=0;e<8;e++)s[(i<<8)+255-e]=0;if(this.clipToTvSize)for(i=0;i<8;i++)for(e=0;e<256;e++)s[(i<<8)+e]=0,s[(239-i<<8)+e]=0;this.nes.ui.writeFrame(s)},updateControlReg1:function(t){this.triggerRendering(),this.f_nmiOnVblank=t>>7&1,this.f_spriteSize=t>>5&1,this.f_bgPatternTable=t>>4&1,this.f_spPatternTable=t>>3&1,this.f_addrInc=t>>2&1,this.f_nTblAddress=t&3,this.regV=t>>1&1,this.regH=t&1,this.regS=t>>4&1},updateControlReg2:function(t){this.triggerRendering(),this.f_color=t>>5&7,this.f_spVisibility=t>>4&1,this.f_bgVisibility=t>>3&1,this.f_spClipping=t>>2&1,this.f_bgClipping=t>>1&1,this.f_dispType=t&1,this.f_dispType===0&&this.palTable.setEmphasis(this.f_color),this.updatePalettes()},setStatusFlag:function(t,e){var i=1<<t;this.nes.cpu.mem[8194]=this.nes.cpu.mem[8194]&255-i|(e?i:0)},readStatusRegister:function(){var t=this.nes.cpu.mem[8194];return this.firstWrite=!0,this.setStatusFlag(this.STATUS_VBLANK,!1),t},writeSRAMAddress:function(t){this.sramAddress=t},sramLoad:function(){return this.spriteMem[this.sramAddress]},sramWrite:function(t){this.spriteMem[this.sramAddress]=t,this.spriteRamWriteUpdate(this.sramAddress,t),this.sramAddress++,this.sramAddress%=256},scrollWrite:function(t){this.triggerRendering(),this.firstWrite?(this.regHT=t>>3&31,this.regFH=t&7):(this.regFV=t&7,this.regVT=t>>3&31),this.firstWrite=!this.firstWrite},writeVRAMAddress:function(t){this.firstWrite?(this.regFV=t>>4&3,this.regV=t>>3&1,this.regH=t>>2&1,this.regVT=this.regVT&7|(t&3)<<3):(this.triggerRendering(),this.regVT=this.regVT&24|t>>5&7,this.regHT=t&31,this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.checkSprite0(this.scanline-20)),this.firstWrite=!this.firstWrite,this.cntsToAddress(),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress)},vramLoad:function(){var t;return this.cntsToAddress(),this.regsToAddress(),this.vramAddress<=16127?(t=this.vramBufferedReadValue,this.vramAddress<8192?this.vramBufferedReadValue=this.vramMem[this.vramAddress]:this.vramBufferedReadValue=this.mirroredLoad(this.vramAddress),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress),this.vramAddress+=this.f_addrInc===1?32:1,this.cntsFromAddress(),this.regsFromAddress(),t):(t=this.mirroredLoad(this.vramAddress),this.vramAddress+=this.f_addrInc===1?32:1,this.cntsFromAddress(),this.regsFromAddress(),t)},vramWrite:function(t){this.triggerRendering(),this.cntsToAddress(),this.regsToAddress(),this.vramAddress>=8192?this.mirroredWrite(this.vramAddress,t):(this.writeMem(this.vramAddress,t),this.nes.mmap.latchAccess(this.vramAddress)),this.vramAddress+=this.f_addrInc===1?32:1,this.regsFromAddress(),this.cntsFromAddress()},sramDMA:function(t){for(var e=t*256,i,s=this.sramAddress;s<256;s++)i=this.nes.cpu.mem[e+s],this.spriteMem[s]=i,this.spriteRamWriteUpdate(s,i);this.nes.cpu.haltCycles(513)},regsFromAddress:function(){var t=this.vramTmpAddress>>8&255;this.regFV=t>>4&7,this.regV=t>>3&1,this.regH=t>>2&1,this.regVT=this.regVT&7|(t&3)<<3,t=this.vramTmpAddress&255,this.regVT=this.regVT&24|t>>5&7,this.regHT=t&31},cntsFromAddress:function(){var t=this.vramAddress>>8&255;this.cntFV=t>>4&3,this.cntV=t>>3&1,this.cntH=t>>2&1,this.cntVT=this.cntVT&7|(t&3)<<3,t=this.vramAddress&255,this.cntVT=this.cntVT&24|t>>5&7,this.cntHT=t&31},regsToAddress:function(){var t=(this.regFV&7)<<4;t|=(this.regV&1)<<3,t|=(this.regH&1)<<2,t|=this.regVT>>3&3;var e=(this.regVT&7)<<5;e|=this.regHT&31,this.vramTmpAddress=(t<<8|e)&32767},cntsToAddress:function(){var t=(this.cntFV&7)<<4;t|=(this.cntV&1)<<3,t|=(this.cntH&1)<<2,t|=this.cntVT>>3&3;var e=(this.cntVT&7)<<5;e|=this.cntHT&31,this.vramAddress=(t<<8|e)&32767},incTileCounter:function(t){for(var e=t;e!==0;e--)this.cntHT++,this.cntHT===32&&(this.cntHT=0,this.cntVT++,this.cntVT>=30&&(this.cntH++,this.cntH===2&&(this.cntH=0,this.cntV++,this.cntV===2&&(this.cntV=0,this.cntFV++,this.cntFV&=7))))},mirroredLoad:function(t){return this.vramMem[this.vramMirrorTable[t]]},mirroredWrite:function(t,e){if(t>=16128&&t<16160)t===16128||t===16144?(this.writeMem(16128,e),this.writeMem(16144,e)):t===16132||t===16148?(this.writeMem(16132,e),this.writeMem(16148,e)):t===16136||t===16152?(this.writeMem(16136,e),this.writeMem(16152,e)):t===16140||t===16156?(this.writeMem(16140,e),this.writeMem(16156,e)):this.writeMem(t,e);else if(t<this.vramMirrorTable.length)this.writeMem(this.vramMirrorTable[t],e);else throw new Error("Invalid VRAM address: "+t.toString(16))},triggerRendering:function(){this.scanline>=21&&this.scanline<=260&&(this.renderFramePartially(this.lastRenderedScanline+1,this.scanline-21-this.lastRenderedScanline),this.lastRenderedScanline=this.scanline-21)},renderFramePartially:function(t,e){if(this.f_spVisibility===1&&this.renderSpritesPartially(t,e,!0),this.f_bgVisibility===1){var i=t<<8,s=t+e<<8;s>61440&&(s=61440);for(var r=this.buffer,n=this.bgbuffer,o=this.pixrendered,h=i;h<s;h++)o[h]>255&&(r[h]=n[h])}this.f_spVisibility===1&&this.renderSpritesPartially(t,e,!1),this.validTileData=!1},renderBgScanline:function(t,e){var i=this.regS===0?0:256,s=(e<<8)-this.regFH;if(this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],this.cntHT=this.regHT,this.cntH=this.regH,this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],e<240&&e-this.cntFV>=0){for(var r=this.cntFV<<3,n=this.scantile,o=this.attrib,h=this.ptTile,f=this.nameTable,u=this.imgPalette,R=this.pixrendered,S=t?this.bgbuffer:this.buffer,b,F,B,Y,y=0;y<32;y++){if(e>=0){if(this.validTileData){if(b=n[y],typeof b=="undefined")continue;F=b.pix,B=o[y]}else{if(b=h[i+f[this.curNt].getTileIndex(this.cntHT,this.cntVT)],typeof b=="undefined")continue;F=b.pix,B=f[this.curNt].getAttrib(this.cntHT,this.cntVT),n[y]=b,o[y]=B}var M=0,$=(y<<3)-this.regFH;if($>-8)if($<0&&(s-=$,M=-$),b.opaque[this.cntFV])for(;M<8;M++)S[s]=u[F[r+M]+B],R[s]|=256,s++;else for(;M<8;M++)Y=F[r+M],Y!==0&&(S[s]=u[Y+B],R[s]|=256),s++}++this.cntHT==32&&(this.cntHT=0,this.cntH++,this.cntH%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH])}this.validTileData=!0}this.cntFV++,this.cntFV===8&&(this.cntFV=0,this.cntVT++,this.cntVT===30?(this.cntVT=0,this.cntV++,this.cntV%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH]):this.cntVT===32&&(this.cntVT=0),this.validTileData=!1)},renderSpritesPartially:function(t,e,i){if(this.f_spVisibility===1){for(var s=0;s<64;s++)if(this.bgPriority[s]===i&&this.sprX[s]>=0&&this.sprX[s]<256&&this.sprY[s]+8>=t&&this.sprY[s]<t+e)if(this.f_spriteSize===0)this.srcy1=0,this.srcy2=8,this.sprY[s]<t&&(this.srcy1=t-this.sprY[s]-1),this.sprY[s]+8>t+e&&(this.srcy2=t+e-this.sprY[s]+1),this.f_spPatternTable===0?this.ptTile[this.sprTile[s]].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[s],this.sprY[s]+1,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered):this.ptTile[this.sprTile[s]+256].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[s],this.sprY[s]+1,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered);else{var r=this.sprTile[s];(r&1)!=0&&(r=this.sprTile[s]-1+256);var n=0,o=8;this.sprY[s]<t&&(n=t-this.sprY[s]-1),this.sprY[s]+8>t+e&&(o=t+e-this.sprY[s]),this.ptTile[r+(this.vertFlip[s]?1:0)].render(this.buffer,0,n,8,o,this.sprX[s],this.sprY[s]+1,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered),n=0,o=8,this.sprY[s]+8<t&&(n=t-(this.sprY[s]+8+1)),this.sprY[s]+16>t+e&&(o=t+e-(this.sprY[s]+8)),this.ptTile[r+(this.vertFlip[s]?0:1)].render(this.buffer,0,n,8,o,this.sprX[s],this.sprY[s]+1+8,this.sprCol[s],this.sprPalette,this.horiFlip[s],this.vertFlip[s],s,this.pixrendered)}}},checkSprite0:function(t){this.spr0HitX=-1,this.spr0HitY=-1;var e,i=this.f_spPatternTable===0?0:256,s,r,n,o,h;if(s=this.sprX[0],r=this.sprY[0]+1,this.f_spriteSize===0){if(r<=t&&r+8>t&&s>=-7&&s<256)if(n=this.ptTile[this.sprTile[0]+i],this.vertFlip[0]?e=7-(t-r):e=t-r,e*=8,h=t*256+s,this.horiFlip[0])for(o=7;o>=0;o--){if(s>=0&&s<256&&h>=0&&h<61440&&this.pixrendered[h]!==0&&n.pix[e+o]!==0)return this.spr0HitX=h%256,this.spr0HitY=t,!0;s++,h++}else for(o=0;o<8;o++){if(s>=0&&s<256&&h>=0&&h<61440&&this.pixrendered[h]!==0&&n.pix[e+o]!==0)return this.spr0HitX=h%256,this.spr0HitY=t,!0;s++,h++}}else if(r<=t&&r+16>t&&s>=-7&&s<256)if(this.vertFlip[0]?e=15-(t-r):e=t-r,e<8?n=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?1:0)+((this.sprTile[0]&1)!=0?255:0)]:(n=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?0:1)+((this.sprTile[0]&1)!=0?255:0)],this.vertFlip[0]?e=15-e:e-=8),e*=8,h=t*256+s,this.horiFlip[0])for(o=7;o>=0;o--){if(s>=0&&s<256&&h>=0&&h<61440&&this.pixrendered[h]!==0&&n.pix[e+o]!==0)return this.spr0HitX=h%256,this.spr0HitY=t,!0;s++,h++}else for(o=0;o<8;o++){if(s>=0&&s<256&&h>=0&&h<61440&&this.pixrendered[h]!==0&&n.pix[e+o]!==0)return this.spr0HitX=h%256,this.spr0HitY=t,!0;s++,h++}return!1},writeMem:function(t,e){this.vramMem[t]=e,t<8192?(this.vramMem[t]=e,this.patternWrite(t,e)):t>=8192&&t<9152?this.nameTableWrite(this.ntable1[0],t-8192,e):t>=9152&&t<9216?this.attribTableWrite(this.ntable1[0],t-9152,e):t>=9216&&t<10176?this.nameTableWrite(this.ntable1[1],t-9216,e):t>=10176&&t<10240?this.attribTableWrite(this.ntable1[1],t-10176,e):t>=10240&&t<11200?this.nameTableWrite(this.ntable1[2],t-10240,e):t>=11200&&t<11264?this.attribTableWrite(this.ntable1[2],t-11200,e):t>=11264&&t<12224?this.nameTableWrite(this.ntable1[3],t-11264,e):t>=12224&&t<12288?this.attribTableWrite(this.ntable1[3],t-12224,e):t>=16128&&t<16160&&this.updatePalettes()},updatePalettes:function(){var t;for(t=0;t<16;t++)this.f_dispType===0?this.imgPalette[t]=this.palTable.getEntry(this.vramMem[16128+t]&63):this.imgPalette[t]=this.palTable.getEntry(this.vramMem[16128+t]&32);for(t=0;t<16;t++)this.f_dispType===0?this.sprPalette[t]=this.palTable.getEntry(this.vramMem[16144+t]&63):this.sprPalette[t]=this.palTable.getEntry(this.vramMem[16144+t]&32)},patternWrite:function(t,e){var i=Math.floor(t/16),s=t%16;s<8?this.ptTile[i].setScanline(s,e,this.vramMem[t+8]):this.ptTile[i].setScanline(s-8,this.vramMem[t-8],e)},nameTableWrite:function(t,e,i){this.nameTable[t].tile[e]=i,this.checkSprite0(this.scanline-20)},attribTableWrite:function(t,e,i){this.nameTable[t].writeAttrib(e,i)},spriteRamWriteUpdate:function(t,e){var i=Math.floor(t/4);i===0&&this.checkSprite0(this.scanline-20),t%4==0?this.sprY[i]=e:t%4==1?this.sprTile[i]=e:t%4==2?(this.vertFlip[i]=(e&128)!=0,this.horiFlip[i]=(e&64)!=0,this.bgPriority[i]=(e&32)!=0,this.sprCol[i]=(e&3)<<2):t%4==3&&(this.sprX[i]=e)},doNMI:function(){this.setStatusFlag(this.STATUS_VBLANK,!0),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI)},isPixelWhite:function(t,e){return this.triggerRendering(),this.nes.ppu.buffer[(e<<8)+t]===16777215},JSON_PROPERTIES:["vramMem","spriteMem","cntFV","cntV","cntH","cntVT","cntHT","regFV","regV","regH","regVT","regHT","regFH","regS","vramAddress","vramTmpAddress","f_nmiOnVblank","f_spriteSize","f_bgPatternTable","f_spPatternTable","f_addrInc","f_nTblAddress","f_color","f_spVisibility","f_bgVisibility","f_spClipping","f_bgClipping","f_dispType","vramBufferedReadValue","firstWrite","currentMirroring","vramMirrorTable","ntable1","sramAddress","hitSpr0","sprPalette","imgPalette","curX","scanline","lastRenderedScanline","curNt","scantile","attrib","buffer","bgbuffer","pixrendered","requestEndFrame","nmiOk","dummyCycleToggle","nmiCounter","validTileData","scanlineAlreadyRendered"],toJSON:function(){var t,e=wr.toJSON(this);for(e.nameTable=[],t=0;t<this.nameTable.length;t++)e.nameTable[t]=this.nameTable[t].toJSON();for(e.ptTile=[],t=0;t<this.ptTile.length;t++)e.ptTile[t]=this.ptTile[t].toJSON();return e},fromJSON:function(t){var e;for(wr.fromJSON(this,t),e=0;e<this.nameTable.length;e++)this.nameTable[e].fromJSON(t.nameTable[e]);for(e=0;e<this.ptTile.length;e++)this.ptTile[e].fromJSON(t.ptTile[e]);for(e=0;e<this.spriteMem.length;e++)this.spriteRamWriteUpdate(e,this.spriteMem[e])}};var Lr=function(t,e,i){this.width=t,this.height=e,this.name=i,this.tile=new Array(t*e),this.attrib=new Array(t*e);for(var s=0;s<t*e;s++)this.tile[s]=0,this.attrib[s]=0};Lr.prototype={getTileIndex:function(t,e){return this.tile[e*this.width+t]},getAttrib:function(t,e){return this.attrib[e*this.width+t]},writeAttrib:function(t,e){for(var i=t%8*4,s=Math.floor(t/8)*4,r,n,o,h,f=0;f<2;f++)for(var u=0;u<2;u++){r=e>>2*(f*2+u)&3;for(var R=0;R<2;R++)for(var S=0;S<2;S++)n=i+u*2+S,o=s+f*2+R,h=o*this.width+n,this.attrib[h]=r<<2&12}},toJSON:function(){return{tile:this.tile,attrib:this.attrib}},fromJSON:function(t){this.tile=t.tile,this.attrib=t.attrib}};var kr=function(){this.curTable=new Array(64),this.emphTable=new Array(8),this.currentEmph=-1};kr.prototype={reset:function(){this.setEmphasis(0)},loadNTSCPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},loadPALPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},makeTables:function(){for(var t,e,i,s,r,n,o,h,f=0;f<8;f++)for(n=1,o=1,h=1,(f&1)!=0&&(n=.75,h=.75),(f&2)!=0&&(n=.75,o=.75),(f&4)!=0&&(o=.75,h=.75),this.emphTable[f]=new Array(64),r=0;r<64;r++)s=this.curTable[r],t=Math.floor(this.getRed(s)*n),e=Math.floor(this.getGreen(s)*o),i=Math.floor(this.getBlue(s)*h),this.emphTable[f][r]=this.getRgb(t,e,i)},setEmphasis:function(t){if(t!==this.currentEmph){this.currentEmph=t;for(var e=0;e<64;e++)this.curTable[e]=this.emphTable[t][e]}},getEntry:function(t){return this.curTable[t]},getRed:function(t){return t>>16&255},getGreen:function(t){return t>>8&255},getBlue:function(t){return t&255},getRgb:function(t,e,i){return t<<16|e<<8|i},loadDefaultPalette:function(){this.curTable[0]=this.getRgb(117,117,117),this.curTable[1]=this.getRgb(39,27,143),this.curTable[2]=this.getRgb(0,0,171),this.curTable[3]=this.getRgb(71,0,159),this.curTable[4]=this.getRgb(143,0,119),this.curTable[5]=this.getRgb(171,0,19),this.curTable[6]=this.getRgb(167,0,0),this.curTable[7]=this.getRgb(127,11,0),this.curTable[8]=this.getRgb(67,47,0),this.curTable[9]=this.getRgb(0,71,0),this.curTable[10]=this.getRgb(0,81,0),this.curTable[11]=this.getRgb(0,63,23),this.curTable[12]=this.getRgb(27,63,95),this.curTable[13]=this.getRgb(0,0,0),this.curTable[14]=this.getRgb(0,0,0),this.curTable[15]=this.getRgb(0,0,0),this.curTable[16]=this.getRgb(188,188,188),this.curTable[17]=this.getRgb(0,115,239),this.curTable[18]=this.getRgb(35,59,239),this.curTable[19]=this.getRgb(131,0,243),this.curTable[20]=this.getRgb(191,0,191),this.curTable[21]=this.getRgb(231,0,91),this.curTable[22]=this.getRgb(219,43,0),this.curTable[23]=this.getRgb(203,79,15),this.curTable[24]=this.getRgb(139,115,0),this.curTable[25]=this.getRgb(0,151,0),this.curTable[26]=this.getRgb(0,171,0),this.curTable[27]=this.getRgb(0,147,59),this.curTable[28]=this.getRgb(0,131,139),this.curTable[29]=this.getRgb(0,0,0),this.curTable[30]=this.getRgb(0,0,0),this.curTable[31]=this.getRgb(0,0,0),this.curTable[32]=this.getRgb(255,255,255),this.curTable[33]=this.getRgb(63,191,255),this.curTable[34]=this.getRgb(95,151,255),this.curTable[35]=this.getRgb(167,139,253),this.curTable[36]=this.getRgb(247,123,255),this.curTable[37]=this.getRgb(255,119,183),this.curTable[38]=this.getRgb(255,119,99),this.curTable[39]=this.getRgb(255,155,59),this.curTable[40]=this.getRgb(243,191,63),this.curTable[41]=this.getRgb(131,211,19),this.curTable[42]=this.getRgb(79,223,75),this.curTable[43]=this.getRgb(88,248,152),this.curTable[44]=this.getRgb(0,235,219),this.curTable[45]=this.getRgb(0,0,0),this.curTable[46]=this.getRgb(0,0,0),this.curTable[47]=this.getRgb(0,0,0),this.curTable[48]=this.getRgb(255,255,255),this.curTable[49]=this.getRgb(171,231,255),this.curTable[50]=this.getRgb(199,215,255),this.curTable[51]=this.getRgb(215,203,255),this.curTable[52]=this.getRgb(255,199,255),this.curTable[53]=this.getRgb(255,199,219),this.curTable[54]=this.getRgb(255,191,179),this.curTable[55]=this.getRgb(255,219,171),this.curTable[56]=this.getRgb(255,231,163),this.curTable[57]=this.getRgb(227,255,163),this.curTable[58]=this.getRgb(171,243,191),this.curTable[59]=this.getRgb(179,255,207),this.curTable[60]=this.getRgb(159,255,243),this.curTable[61]=this.getRgb(0,0,0),this.curTable[62]=this.getRgb(0,0,0),this.curTable[63]=this.getRgb(0,0,0),this.makeTables(),this.setEmphasis(0)}};var vo=vr,Lo=17897725e-1,Br=function(t){this.nes=t,this.square1=new Ui(this,!0),this.square2=new Ui(this,!1),this.triangle=new qr(this),this.noise=new Gr(this),this.dmc=new Vr(this),this.frameIrqCounter=null,this.frameIrqCounterMax=4,this.initCounter=2048,this.channelEnableValue=null,this.sampleRate=44100,this.lengthLookup=null,this.dmcFreqLookup=null,this.noiseWavelengthLookup=null,this.square_table=null,this.tnd_table=null,this.frameIrqEnabled=!1,this.frameIrqActive=null,this.frameClockNow=null,this.startedPlaying=!1,this.recordOutput=!1,this.initingHardware=!1,this.masterFrameCounter=null,this.derivedFrameCounter=null,this.countSequence=null,this.sampleTimer=null,this.frameTime=null,this.sampleTimerMax=null,this.sampleCount=null,this.triValue=0,this.smpSquare1=null,this.smpSquare2=null,this.smpTriangle=null,this.smpDmc=null,this.accCount=null,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.dacRange=0,this.dcValue=0,this.masterVolume=256,this.stereoPosLSquare1=null,this.stereoPosLSquare2=null,this.stereoPosLTriangle=null,this.stereoPosLNoise=null,this.stereoPosLDMC=null,this.stereoPosRSquare1=null,this.stereoPosRSquare2=null,this.stereoPosRTriangle=null,this.stereoPosRNoise=null,this.stereoPosRDMC=null,this.extraCycles=null,this.maxSample=null,this.minSample=null,this.panning=[80,170,100,150,128],this.setPanning(this.panning),this.initLengthLookup(),this.initDmcFrequencyLookup(),this.initNoiseWavelengthLookup(),this.initDACtables();for(var e=0;e<20;e++)e===16?this.writeReg(16400,16):this.writeReg(16384+e,0);this.reset()};Br.prototype={reset:function(){this.sampleRate=this.nes.opts.sampleRate,this.sampleTimerMax=Math.floor(1024*Lo*this.nes.opts.preferredFrameRate/(this.sampleRate*60)),this.frameTime=Math.floor(14915*this.nes.opts.preferredFrameRate/60),this.sampleTimer=0,this.updateChannelEnable(0),this.masterFrameCounter=0,this.derivedFrameCounter=0,this.countSequence=0,this.sampleCount=0,this.initCounter=2048,this.frameIrqEnabled=!1,this.initingHardware=!1,this.resetCounter(),this.square1.reset(),this.square2.reset(),this.triangle.reset(),this.noise.reset(),this.dmc.reset(),this.accCount=0,this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0,this.frameIrqEnabled=!1,this.frameIrqCounterMax=4,this.channelEnableValue=255,this.startedPlaying=!1,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.maxSample=-5e5,this.minSample=5e5},readReg:function(t){var e=0;return e|=this.square1.getLengthStatus(),e|=this.square2.getLengthStatus()<<1,e|=this.triangle.getLengthStatus()<<2,e|=this.noise.getLengthStatus()<<3,e|=this.dmc.getLengthStatus()<<4,e|=(this.frameIrqActive&&this.frameIrqEnabled?1:0)<<6,e|=this.dmc.getIrqStatus()<<7,this.frameIrqActive=!1,this.dmc.irqGenerated=!1,e&65535},writeReg:function(t,e){t>=16384&&t<16388?this.square1.writeReg(t,e):t>=16388&&t<16392?this.square2.writeReg(t,e):t>=16392&&t<16396?this.triangle.writeReg(t,e):t>=16396&&t<=16399?this.noise.writeReg(t,e):t===16400?this.dmc.writeReg(t,e):t===16401?this.dmc.writeReg(t,e):t===16402?this.dmc.writeReg(t,e):t===16403?this.dmc.writeReg(t,e):t===16405?(this.updateChannelEnable(e),e!==0&&this.initCounter>0&&(this.initingHardware=!0),this.dmc.writeReg(t,e)):t===16407&&(this.countSequence=e>>7&1,this.masterFrameCounter=0,this.frameIrqActive=!1,(e>>6&1)==0?this.frameIrqEnabled=!0:this.frameIrqEnabled=!1,this.countSequence===0?(this.frameIrqCounterMax=4,this.derivedFrameCounter=4):(this.frameIrqCounterMax=5,this.derivedFrameCounter=0,this.frameCounterTick()))},resetCounter:function(){this.countSequence===0?this.derivedFrameCounter=4:this.derivedFrameCounter=0},updateChannelEnable:function(t){this.channelEnableValue=t&65535,this.square1.setEnabled((t&1)!=0),this.square2.setEnabled((t&2)!=0),this.triangle.setEnabled((t&4)!=0),this.noise.setEnabled((t&8)!=0),this.dmc.setEnabled((t&16)!=0)},clockFrameCounter:function(t){if(this.initCounter>0&&this.initingHardware){this.initCounter-=t,this.initCounter<=0&&(this.initingHardware=!1);return}t+=this.extraCycles;var e=this.sampleTimerMax-this.sampleTimer;t<<10>e?(this.extraCycles=(t<<10)-e>>10,t-=this.extraCycles):this.extraCycles=0;var i=this.dmc,s=this.triangle,r=this.square1,n=this.square2,o=this.noise;if(i.isEnabled)for(i.shiftCounter-=t<<3;i.shiftCounter<=0&&i.dmaFrequency>0;)i.shiftCounter+=i.dmaFrequency,i.clockDmc();if(s.progTimerMax>0)for(s.progTimerCount-=t;s.progTimerCount<=0;)s.progTimerCount+=s.progTimerMax+1,s.linearCounter>0&&s.lengthCounter>0&&(s.triangleCounter++,s.triangleCounter&=31,s.isEnabled&&(s.triangleCounter>=16?s.sampleValue=s.triangleCounter&15:s.sampleValue=15-(s.triangleCounter&15),s.sampleValue<<=4));r.progTimerCount-=t,r.progTimerCount<=0&&(r.progTimerCount+=r.progTimerMax+1<<1,r.squareCounter++,r.squareCounter&=7,r.updateSampleValue()),n.progTimerCount-=t,n.progTimerCount<=0&&(n.progTimerCount+=n.progTimerMax+1<<1,n.squareCounter++,n.squareCounter&=7,n.updateSampleValue());var h=t;if(o.progTimerCount-h>0)o.progTimerCount-=h,o.accCount+=h,o.accValue+=h*o.sampleValue;else for(;h-- >0;)--o.progTimerCount<=0&&o.progTimerMax>0&&(o.shiftReg<<=1,o.tmp=(o.shiftReg<<(o.randomMode===0?1:6)^o.shiftReg)&32768,o.tmp!==0?(o.shiftReg|=1,o.randomBit=0,o.sampleValue=0):(o.randomBit=1,o.isEnabled&&o.lengthCounter>0?o.sampleValue=o.masterVolume:o.sampleValue=0),o.progTimerCount+=o.progTimerMax),o.accValue+=o.sampleValue,o.accCount++;this.frameIrqEnabled&&this.frameIrqActive&&this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.masterFrameCounter+=t<<1,this.masterFrameCounter>=this.frameTime&&(this.masterFrameCounter-=this.frameTime,this.frameCounterTick()),this.accSample(t),this.sampleTimer+=t<<10,this.sampleTimer>=this.sampleTimerMax&&(this.sample(),this.sampleTimer-=this.sampleTimerMax)},accSample:function(t){this.triangle.sampleCondition&&(this.triValue=Math.floor((this.triangle.progTimerCount<<4)/(this.triangle.progTimerMax+1)),this.triValue>16&&(this.triValue=16),this.triangle.triangleCounter>=16&&(this.triValue=16-this.triValue),this.triValue+=this.triangle.sampleValue),t===2?(this.smpTriangle+=this.triValue<<1,this.smpDmc+=this.dmc.sample<<1,this.smpSquare1+=this.square1.sampleValue<<1,this.smpSquare2+=this.square2.sampleValue<<1,this.accCount+=2):t===4?(this.smpTriangle+=this.triValue<<2,this.smpDmc+=this.dmc.sample<<2,this.smpSquare1+=this.square1.sampleValue<<2,this.smpSquare2+=this.square2.sampleValue<<2,this.accCount+=4):(this.smpTriangle+=t*this.triValue,this.smpDmc+=t*this.dmc.sample,this.smpSquare1+=t*this.square1.sampleValue,this.smpSquare2+=t*this.square2.sampleValue,this.accCount+=t)},frameCounterTick:function(){this.derivedFrameCounter++,this.derivedFrameCounter>=this.frameIrqCounterMax&&(this.derivedFrameCounter=0),(this.derivedFrameCounter===1||this.derivedFrameCounter===3)&&(this.triangle.clockLengthCounter(),this.square1.clockLengthCounter(),this.square2.clockLengthCounter(),this.noise.clockLengthCounter(),this.square1.clockSweep(),this.square2.clockSweep()),this.derivedFrameCounter>=0&&this.derivedFrameCounter<4&&(this.square1.clockEnvDecay(),this.square2.clockEnvDecay(),this.noise.clockEnvDecay(),this.triangle.clockLinearCounter()),this.derivedFrameCounter===3&&this.countSequence===0&&(this.frameIrqActive=!0)},sample:function(){var t,e;this.accCount>0?(this.smpSquare1<<=4,this.smpSquare1=Math.floor(this.smpSquare1/this.accCount),this.smpSquare2<<=4,this.smpSquare2=Math.floor(this.smpSquare2/this.accCount),this.smpTriangle=Math.floor(this.smpTriangle/this.accCount),this.smpDmc<<=4,this.smpDmc=Math.floor(this.smpDmc/this.accCount),this.accCount=0):(this.smpSquare1=this.square1.sampleValue<<4,this.smpSquare2=this.square2.sampleValue<<4,this.smpTriangle=this.triangle.sampleValue,this.smpDmc=this.dmc.sample<<4);var i=Math.floor((this.noise.accValue<<4)/this.noise.accCount);this.noise.accValue=i>>4,this.noise.accCount=1,t=this.smpSquare1*this.stereoPosLSquare1+this.smpSquare2*this.stereoPosLSquare2>>8,e=3*this.smpTriangle*this.stereoPosLTriangle+(i<<1)*this.stereoPosLNoise+this.smpDmc*this.stereoPosLDMC>>8,t>=this.square_table.length&&(t=this.square_table.length-1),e>=this.tnd_table.length&&(e=this.tnd_table.length-1);var s=this.square_table[t]+this.tnd_table[e]-this.dcValue;t=this.smpSquare1*this.stereoPosRSquare1+this.smpSquare2*this.stereoPosRSquare2>>8,e=3*this.smpTriangle*this.stereoPosRTriangle+(i<<1)*this.stereoPosRNoise+this.smpDmc*this.stereoPosRDMC>>8,t>=this.square_table.length&&(t=this.square_table.length-1),e>=this.tnd_table.length&&(e=this.tnd_table.length-1);var r=this.square_table[t]+this.tnd_table[e]-this.dcValue,n=s-this.prevSampleL;this.prevSampleL+=n,this.smpAccumL+=n-(this.smpAccumL>>10),s=this.smpAccumL;var o=r-this.prevSampleR;this.prevSampleR+=o,this.smpAccumR+=o-(this.smpAccumR>>10),r=this.smpAccumR,s>this.maxSample&&(this.maxSample=s),s<this.minSample&&(this.minSample=s),this.nes.opts.onAudioSample&&this.nes.opts.onAudioSample(s/32768,r/32768),this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0},getLengthMax:function(t){return this.lengthLookup[t>>3]},getDmcFrequency:function(t){return t>=0&&t<16?this.dmcFreqLookup[t]:0},getNoiseWaveLength:function(t){return t>=0&&t<16?this.noiseWavelengthLookup[t]:0},setPanning:function(t){for(var e=0;e<5;e++)this.panning[e]=t[e];this.updateStereoPos()},setMasterVolume:function(t){t<0&&(t=0),t>256&&(t=256),this.masterVolume=t,this.updateStereoPos()},updateStereoPos:function(){this.stereoPosLSquare1=this.panning[0]*this.masterVolume>>8,this.stereoPosLSquare2=this.panning[1]*this.masterVolume>>8,this.stereoPosLTriangle=this.panning[2]*this.masterVolume>>8,this.stereoPosLNoise=this.panning[3]*this.masterVolume>>8,this.stereoPosLDMC=this.panning[4]*this.masterVolume>>8,this.stereoPosRSquare1=this.masterVolume-this.stereoPosLSquare1,this.stereoPosRSquare2=this.masterVolume-this.stereoPosLSquare2,this.stereoPosRTriangle=this.masterVolume-this.stereoPosLTriangle,this.stereoPosRNoise=this.masterVolume-this.stereoPosLNoise,this.stereoPosRDMC=this.masterVolume-this.stereoPosLDMC},initLengthLookup:function(){this.lengthLookup=[10,254,20,2,40,4,80,6,160,8,60,10,14,12,26,14,12,16,24,18,48,20,96,22,192,24,72,26,16,28,32,30]},initDmcFrequencyLookup:function(){this.dmcFreqLookup=new Array(16),this.dmcFreqLookup[0]=3424,this.dmcFreqLookup[1]=3040,this.dmcFreqLookup[2]=2720,this.dmcFreqLookup[3]=2560,this.dmcFreqLookup[4]=2288,this.dmcFreqLookup[5]=2032,this.dmcFreqLookup[6]=1808,this.dmcFreqLookup[7]=1712,this.dmcFreqLookup[8]=1520,this.dmcFreqLookup[9]=1280,this.dmcFreqLookup[10]=1136,this.dmcFreqLookup[11]=1024,this.dmcFreqLookup[12]=848,this.dmcFreqLookup[13]=672,this.dmcFreqLookup[14]=576,this.dmcFreqLookup[15]=432},initNoiseWavelengthLookup:function(){this.noiseWavelengthLookup=new Array(16),this.noiseWavelengthLookup[0]=4,this.noiseWavelengthLookup[1]=8,this.noiseWavelengthLookup[2]=16,this.noiseWavelengthLookup[3]=32,this.noiseWavelengthLookup[4]=64,this.noiseWavelengthLookup[5]=96,this.noiseWavelengthLookup[6]=128,this.noiseWavelengthLookup[7]=160,this.noiseWavelengthLookup[8]=202,this.noiseWavelengthLookup[9]=254,this.noiseWavelengthLookup[10]=380,this.noiseWavelengthLookup[11]=508,this.noiseWavelengthLookup[12]=762,this.noiseWavelengthLookup[13]=1016,this.noiseWavelengthLookup[14]=2034,this.noiseWavelengthLookup[15]=4068},initDACtables:function(){var t,e,i,s=0,r=0;for(this.square_table=new Array(32*16),this.tnd_table=new Array(204*16),i=0;i<32*16;i++)t=95.52/(8128/(i/16)+100),t*=.98411,t*=5e4,e=Math.floor(t),this.square_table[i]=e,e>s&&(s=e);for(i=0;i<204*16;i++)t=163.67/(24329/(i/16)+100),t*=.98411,t*=5e4,e=Math.floor(t),this.tnd_table[i]=e,e>r&&(r=e);this.dacRange=s+r,this.dcValue=this.dacRange/2}};var Vr=function(t){this.papu=t,this.MODE_NORMAL=0,this.MODE_LOOP=1,this.MODE_IRQ=2,this.isEnabled=null,this.hasSample=null,this.irqGenerated=!1,this.playMode=null,this.dmaFrequency=null,this.dmaCounter=null,this.deltaCounter=null,this.playStartAddress=null,this.playAddress=null,this.playLength=null,this.playLengthCounter=null,this.shiftCounter=null,this.reg4012=null,this.reg4013=null,this.sample=null,this.dacLsb=null,this.data=null,this.reset()};Vr.prototype={clockDmc:function(){this.hasSample&&((this.data&1)==0?this.deltaCounter>0&&this.deltaCounter--:this.deltaCounter<63&&this.deltaCounter++,this.sample=this.isEnabled?(this.deltaCounter<<1)+this.dacLsb:0,this.data>>=1),this.dmaCounter--,this.dmaCounter<=0&&(this.hasSample=!1,this.endOfSample(),this.dmaCounter=8),this.irqGenerated&&this.papu.nes.cpu.requestIrq(this.papu.nes.cpu.IRQ_NORMAL)},endOfSample:function(){this.playLengthCounter===0&&this.playMode===this.MODE_LOOP&&(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength),this.playLengthCounter>0&&(this.nextSample(),this.playLengthCounter===0&&this.playMode===this.MODE_IRQ&&(this.irqGenerated=!0))},nextSample:function(){this.data=this.papu.nes.mmap.load(this.playAddress),this.papu.nes.cpu.haltCycles(4),this.playLengthCounter--,this.playAddress++,this.playAddress>65535&&(this.playAddress=32768),this.hasSample=!0},writeReg:function(t,e){t===16400?(e>>6==0?this.playMode=this.MODE_NORMAL:(e>>6&1)==1?this.playMode=this.MODE_LOOP:e>>6==2&&(this.playMode=this.MODE_IRQ),(e&128)==0&&(this.irqGenerated=!1),this.dmaFrequency=this.papu.getDmcFrequency(e&15)):t===16401?(this.deltaCounter=e>>1&63,this.dacLsb=e&1,this.sample=(this.deltaCounter<<1)+this.dacLsb):t===16402?(this.playStartAddress=e<<6|49152,this.playAddress=this.playStartAddress,this.reg4012=e):t===16403?(this.playLength=(e<<4)+1,this.playLengthCounter=this.playLength,this.reg4013=e):t===16405&&((e>>4&1)==0?this.playLengthCounter=0:(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength),this.irqGenerated=!1)},setEnabled:function(t){!this.isEnabled&&t&&(this.playLengthCounter=this.playLength),this.isEnabled=t},getLengthStatus:function(){return this.playLengthCounter===0||!this.isEnabled?0:1},getIrqStatus:function(){return this.irqGenerated?1:0},reset:function(){this.isEnabled=!1,this.irqGenerated=!1,this.playMode=this.MODE_NORMAL,this.dmaFrequency=0,this.dmaCounter=0,this.deltaCounter=0,this.playStartAddress=0,this.playAddress=0,this.playLength=0,this.playLengthCounter=0,this.sample=0,this.dacLsb=0,this.shiftCounter=0,this.reg4012=0,this.reg4013=0,this.data=0}};var Gr=function(t){this.papu=t,this.isEnabled=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.lengthCounterEnable=null,this.envReset=null,this.shiftNow=null,this.lengthCounter=null,this.progTimerCount=null,this.progTimerMax=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.shiftReg=1<<14,this.randomBit=null,this.randomMode=null,this.sampleValue=null,this.accValue=0,this.accCount=1,this.tmp=null,this.reset()};Gr.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.isEnabled=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1,this.shiftNow=!1,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.shiftReg=1,this.randomBit=0,this.randomMode=0,this.sampleValue=0,this.tmp=0},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,this.lengthCounter===0&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&(this.sampleValue=this.randomBit*this.masterVolume)},writeReg:function(t,e){t===16396?(this.envDecayDisable=(e&16)!=0,this.envDecayRate=e&15,this.envDecayLoopEnable=(e&32)!=0,this.lengthCounterEnable=(e&32)==0,this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume):t===16398?(this.progTimerMax=this.papu.getNoiseWaveLength(e&15),this.randomMode=e>>7):t===16399&&(this.lengthCounter=this.papu.getLengthMax(e&248),this.envReset=!0)},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return this.lengthCounter===0||!this.isEnabled?0:1}};var Ui=function(t,e){this.papu=t,this.dutyLookup=[0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,1,1,1],this.impLookup=[1,-1,0,0,0,0,0,0,1,0,-1,0,0,0,0,0,1,0,0,0,-1,0,0,0,-1,0,1,0,0,0,0,0],this.sqr1=e,this.isEnabled=null,this.lengthCounterEnable=null,this.sweepActive=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.envReset=null,this.sweepCarry=null,this.updateSweepPeriod=null,this.progTimerCount=null,this.progTimerMax=null,this.lengthCounter=null,this.squareCounter=null,this.sweepCounter=null,this.sweepCounterMax=null,this.sweepMode=null,this.sweepShiftAmount=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.dutyMode=null,this.sweepResult=null,this.sampleValue=null,this.vol=null,this.reset()};Ui.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.lengthCounter=0,this.squareCounter=0,this.sweepCounter=0,this.sweepCounterMax=0,this.sweepMode=0,this.sweepShiftAmount=0,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.dutyMode=0,this.vol=0,this.isEnabled=!1,this.lengthCounterEnable=!1,this.sweepActive=!1,this.sweepCarry=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,this.lengthCounter===0&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},clockSweep:function(){--this.sweepCounter<=0&&(this.sweepCounter=this.sweepCounterMax+1,this.sweepActive&&this.sweepShiftAmount>0&&this.progTimerMax>7&&(this.sweepCarry=!1,this.sweepMode===0?(this.progTimerMax+=this.progTimerMax>>this.sweepShiftAmount,this.progTimerMax>4095&&(this.progTimerMax=4095,this.sweepCarry=!0)):this.progTimerMax=this.progTimerMax-((this.progTimerMax>>this.sweepShiftAmount)-(this.sqr1?1:0)))),this.updateSweepPeriod&&(this.updateSweepPeriod=!1,this.sweepCounter=this.sweepCounterMax+1)},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&this.progTimerMax>7?this.sweepMode===0&&this.progTimerMax+(this.progTimerMax>>this.sweepShiftAmount)>4095?this.sampleValue=0:this.sampleValue=this.masterVolume*this.dutyLookup[(this.dutyMode<<3)+this.squareCounter]:this.sampleValue=0},writeReg:function(t,e){var i=this.sqr1?0:4;t===16384+i?(this.envDecayDisable=(e&16)!=0,this.envDecayRate=e&15,this.envDecayLoopEnable=(e&32)!=0,this.dutyMode=e>>6&3,this.lengthCounterEnable=(e&32)==0,this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()):t===16385+i?(this.sweepActive=(e&128)!=0,this.sweepCounterMax=e>>4&7,this.sweepMode=e>>3&1,this.sweepShiftAmount=e&7,this.updateSweepPeriod=!0):t===16386+i?(this.progTimerMax&=1792,this.progTimerMax|=e):t===16387+i&&(this.progTimerMax&=255,this.progTimerMax|=(e&7)<<8,this.isEnabled&&(this.lengthCounter=this.papu.getLengthMax(e&248)),this.envReset=!0)},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return this.lengthCounter===0||!this.isEnabled?0:1}};var qr=function(t){this.papu=t,this.isEnabled=null,this.sampleCondition=null,this.lengthCounterEnable=null,this.lcHalt=null,this.lcControl=null,this.progTimerCount=null,this.progTimerMax=null,this.triangleCounter=null,this.lengthCounter=null,this.linearCounter=null,this.lcLoadValue=null,this.sampleValue=null,this.tmp=null,this.reset()};qr.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.triangleCounter=0,this.isEnabled=!1,this.sampleCondition=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.linearCounter=0,this.lcLoadValue=0,this.lcHalt=!0,this.lcControl=!1,this.tmp=0,this.sampleValue=15},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,this.lengthCounter===0&&this.updateSampleCondition())},clockLinearCounter:function(){this.lcHalt?(this.linearCounter=this.lcLoadValue,this.updateSampleCondition()):this.linearCounter>0&&(this.linearCounter--,this.updateSampleCondition()),this.lcControl||(this.lcHalt=!1)},getLengthStatus:function(){return this.lengthCounter===0||!this.isEnabled?0:1},readReg:function(t){return 0},writeReg:function(t,e){t===16392?(this.lcControl=(e&128)!=0,this.lcLoadValue=e&127,this.lengthCounterEnable=!this.lcControl):t===16394?(this.progTimerMax&=1792,this.progTimerMax|=e):t===16395&&(this.progTimerMax&=255,this.progTimerMax|=(e&7)<<8,this.lengthCounter=this.papu.getLengthMax(e&248),this.lcHalt=!0),this.updateSampleCondition()},clockProgrammableTimer:function(t){if(this.progTimerMax>0)for(this.progTimerCount+=t;this.progTimerMax>0&&this.progTimerCount>=this.progTimerMax;)this.progTimerCount-=this.progTimerMax,this.isEnabled&&this.lengthCounter>0&&this.linearCounter>0&&this.clockTriangleGenerator()},clockTriangleGenerator:function(){this.triangleCounter++,this.triangleCounter&=31},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleCondition()},updateSampleCondition:function(){this.sampleCondition=this.isEnabled&&this.progTimerMax>7&&this.linearCounter>0&&this.lengthCounter>0}};var ko=Br,kt=Wi,_={};_[0]=function(t){this.nes=t};_[0].prototype={reset:function(){this.joy1StrobeState=0,this.joy2StrobeState=0,this.joypadLastWrite=0,this.zapperFired=!1,this.zapperX=null,this.zapperY=null},write:function(t,e){t<8192?this.nes.cpu.mem[t&2047]=e:t>16407?(this.nes.cpu.mem[t]=e,t>=24576&&t<32768&&this.nes.opts.onBatteryRamWrite(t,e)):t>8199&&t<16384?this.regWrite(8192+(t&7),e):this.regWrite(t,e)},writelow:function(t,e){t<8192?this.nes.cpu.mem[t&2047]=e:t>16407?this.nes.cpu.mem[t]=e:t>8199&&t<16384?this.regWrite(8192+(t&7),e):this.regWrite(t,e)},load:function(t){return t&=65535,t>16407?this.nes.cpu.mem[t]:t>=8192?this.regLoad(t):this.nes.cpu.mem[t&2047]},regLoad:function(t){switch(t>>12){case 0:break;case 1:break;case 2:case 3:switch(t&7){case 0:return this.nes.cpu.mem[8192];case 1:return this.nes.cpu.mem[8193];case 2:return this.nes.ppu.readStatusRegister();case 3:return 0;case 4:return this.nes.ppu.sramLoad();case 5:return 0;case 6:return 0;case 7:return this.nes.ppu.vramLoad()}break;case 4:switch(t-16405){case 0:return this.nes.papu.readReg(t);case 1:return this.joy1Read();case 2:var e;return this.zapperX!==null&&this.zapperY!==null&&this.nes.ppu.isPixelWhite(this.zapperX,this.zapperY)?e=0:e=1<<3,this.zapperFired&&(e|=1<<4),(this.joy2Read()|e)&65535}break}return 0},regWrite:function(t,e){switch(t){case 8192:this.nes.cpu.mem[t]=e,this.nes.ppu.updateControlReg1(e);break;case 8193:this.nes.cpu.mem[t]=e,this.nes.ppu.updateControlReg2(e);break;case 8195:this.nes.ppu.writeSRAMAddress(e);break;case 8196:this.nes.ppu.sramWrite(e);break;case 8197:this.nes.ppu.scrollWrite(e);break;case 8198:this.nes.ppu.writeVRAMAddress(e);break;case 8199:this.nes.ppu.vramWrite(e);break;case 16404:this.nes.ppu.sramDMA(e);break;case 16405:this.nes.papu.writeReg(t,e);break;case 16406:(e&1)==0&&(this.joypadLastWrite&1)==1&&(this.joy1StrobeState=0,this.joy2StrobeState=0),this.joypadLastWrite=e;break;case 16407:this.nes.papu.writeReg(t,e);break;default:t>=16384&&t<=16407&&this.nes.papu.writeReg(t,e)}},joy1Read:function(){var t;switch(this.joy1StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=this.nes.controllers[1].state[this.joy1StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:t=0;break;case 19:t=1;break;default:t=0}return this.joy1StrobeState++,this.joy1StrobeState===24&&(this.joy1StrobeState=0),t},joy2Read:function(){var t;switch(this.joy2StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=this.nes.controllers[2].state[this.joy2StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:t=0;break;case 19:t=1;break;default:t=0}return this.joy2StrobeState++,this.joy2StrobeState===24&&(this.joy2StrobeState=0),t},loadROM:function(){if(!this.nes.rom.valid||this.nes.rom.romCount<1)throw new Error("NoMapper: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},loadPRGROM:function(){this.nes.rom.romCount>1?(this.loadRomBank(0,32768),this.loadRomBank(1,49152)):(this.loadRomBank(0,32768),this.loadRomBank(0,49152))},loadCHRROM:function(){this.nes.rom.vromCount>0&&(this.nes.rom.vromCount===1?(this.loadVromBank(0,0),this.loadVromBank(0,4096)):(this.loadVromBank(0,0),this.loadVromBank(1,4096)))},loadBatteryRam:function(){if(this.nes.rom.batteryRam){var t=this.nes.rom.batteryRam;t!==null&&t.length===8192&&kt.copyArrayElements(t,0,this.nes.cpu.mem,24576,8192)}},loadRomBank:function(t,e){t%=this.nes.rom.romCount,kt.copyArrayElements(this.nes.rom.rom[t],0,this.nes.cpu.mem,e,16384)},loadVromBank:function(t,e){if(this.nes.rom.vromCount!==0){this.nes.ppu.triggerRendering(),kt.copyArrayElements(this.nes.rom.vrom[t%this.nes.rom.vromCount],0,this.nes.ppu.vramMem,e,4096);var i=this.nes.rom.vromTile[t%this.nes.rom.vromCount];kt.copyArrayElements(i,0,this.nes.ppu.ptTile,e>>4,256)}},load32kRomBank:function(t,e){this.loadRomBank(t*2%this.nes.rom.romCount,e),this.loadRomBank((t*2+1)%this.nes.rom.romCount,e+16384)},load8kVromBank:function(t,e){this.nes.rom.vromCount!==0&&(this.nes.ppu.triggerRendering(),this.loadVromBank(t%this.nes.rom.vromCount,e),this.loadVromBank((t+1)%this.nes.rom.vromCount,e+4096))},load1kVromBank:function(t,e){if(this.nes.rom.vromCount!==0){this.nes.ppu.triggerRendering();var i=Math.floor(t/4)%this.nes.rom.vromCount,s=t%4*1024;kt.copyArrayElements(this.nes.rom.vrom[i],s,this.nes.ppu.vramMem,e,1024);for(var r=this.nes.rom.vromTile[i],n=e>>4,o=0;o<64;o++)this.nes.ppu.ptTile[n+o]=r[(t%4<<6)+o]}},load2kVromBank:function(t,e){if(this.nes.rom.vromCount!==0){this.nes.ppu.triggerRendering();var i=Math.floor(t/2)%this.nes.rom.vromCount,s=t%2*2048;kt.copyArrayElements(this.nes.rom.vrom[i],s,this.nes.ppu.vramMem,e,2048);for(var r=this.nes.rom.vromTile[i],n=e>>4,o=0;o<128;o++)this.nes.ppu.ptTile[n+o]=r[(t%2<<7)+o]}},load8kRomBank:function(t,e){var i=Math.floor(t/2)%this.nes.rom.romCount,s=t%2*8192;kt.copyArrayElements(this.nes.rom.rom[i],s,this.nes.cpu.mem,e,8192)},clockIrqCounter:function(){},latchAccess:function(t){},toJSON:function(){return{joy1StrobeState:this.joy1StrobeState,joy2StrobeState:this.joy2StrobeState,joypadLastWrite:this.joypadLastWrite}},fromJSON:function(t){this.joy1StrobeState=t.joy1StrobeState,this.joy2StrobeState=t.joy2StrobeState,this.joypadLastWrite=t.joypadLastWrite}};_[1]=function(t){this.nes=t};_[1].prototype=new _[0];_[1].prototype.reset=function(){_[0].prototype.reset.apply(this),this.regBuffer=0,this.regBufferCounter=0,this.mirroring=0,this.oneScreenMirroring=0,this.prgSwitchingArea=1,this.prgSwitchingSize=1,this.vromSwitchingSize=0,this.romSelectionReg0=0,this.romSelectionReg1=0,this.romBankSelect=0};_[1].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}(e&128)!=0?(this.regBufferCounter=0,this.regBuffer=0,this.getRegNumber(t)===0&&(this.prgSwitchingArea=1,this.prgSwitchingSize=1)):(this.regBuffer=this.regBuffer&255-(1<<this.regBufferCounter)|(e&1)<<this.regBufferCounter,this.regBufferCounter++,this.regBufferCounter===5&&(this.setReg(this.getRegNumber(t),this.regBuffer),this.regBuffer=0,this.regBufferCounter=0))};_[1].prototype.setReg=function(t,e){var i;switch(t){case 0:i=e&3,i!==this.mirroring&&(this.mirroring=i,(this.mirroring&2)==0?this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING):(this.mirroring&1)!=0?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING)),this.prgSwitchingArea=e>>2&1,this.prgSwitchingSize=e>>3&1,this.vromSwitchingSize=e>>4&1;break;case 1:this.romSelectionReg0=e>>4&1,this.nes.rom.vromCount>0&&(this.vromSwitchingSize===0?this.romSelectionReg0===0?this.load8kVromBank(e&15,0):this.load8kVromBank(Math.floor(this.nes.rom.vromCount/2)+(e&15),0):this.romSelectionReg0===0?this.loadVromBank(e&15,0):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(e&15),0));break;case 2:this.romSelectionReg1=e>>4&1,this.nes.rom.vromCount>0&&this.vromSwitchingSize===1&&(this.romSelectionReg1===0?this.loadVromBank(e&15,4096):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(e&15),4096));break;default:i=e&15;var s,r=0;this.nes.rom.romCount>=32?this.vromSwitchingSize===0?this.romSelectionReg0===1&&(r=16):r=(this.romSelectionReg0|this.romSelectionReg1<<1)<<3:this.nes.rom.romCount>=16&&this.romSelectionReg0===1&&(r=8),this.prgSwitchingSize===0?(s=r+(e&15),this.load32kRomBank(s,32768)):(s=r*2+(e&15),this.prgSwitchingArea===0?this.loadRomBank(s,49152):this.loadRomBank(s,32768))}};_[1].prototype.getRegNumber=function(t){return t>=32768&&t<=40959?0:t>=40960&&t<=49151?1:t>=49152&&t<=57343?2:3};_[1].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC1: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};_[1].prototype.switchLowHighPrgRom=function(t){};_[1].prototype.switch16to32=function(){};_[1].prototype.switch32to16=function(){};_[1].prototype.toJSON=function(){var t=_[0].prototype.toJSON.apply(this);return t.mirroring=this.mirroring,t.oneScreenMirroring=this.oneScreenMirroring,t.prgSwitchingArea=this.prgSwitchingArea,t.prgSwitchingSize=this.prgSwitchingSize,t.vromSwitchingSize=this.vromSwitchingSize,t.romSelectionReg0=this.romSelectionReg0,t.romSelectionReg1=this.romSelectionReg1,t.romBankSelect=this.romBankSelect,t.regBuffer=this.regBuffer,t.regBufferCounter=this.regBufferCounter,t};_[1].prototype.fromJSON=function(t){_[0].prototype.fromJSON.apply(this,arguments),this.mirroring=t.mirroring,this.oneScreenMirroring=t.oneScreenMirroring,this.prgSwitchingArea=t.prgSwitchingArea,this.prgSwitchingSize=t.prgSwitchingSize,this.vromSwitchingSize=t.vromSwitchingSize,this.romSelectionReg0=t.romSelectionReg0,this.romSelectionReg1=t.romSelectionReg1,this.romBankSelect=t.romBankSelect,this.regBuffer=t.regBuffer,this.regBufferCounter=t.regBufferCounter};_[2]=function(t){this.nes=t};_[2].prototype=new _[0];_[2].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}else this.loadRomBank(e,32768)};_[2].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};_[3]=function(t){this.nes=t};_[3].prototype=new _[0];_[3].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}else{var i=e%(this.nes.rom.vromCount/2)*2;this.loadVromBank(i,0),this.loadVromBank(i+1,4096),this.load8kVromBank(e*2,0)}};_[4]=function(t){this.nes=t,this.CMD_SEL_2_1K_VROM_0000=0,this.CMD_SEL_2_1K_VROM_0800=1,this.CMD_SEL_1K_VROM_1000=2,this.CMD_SEL_1K_VROM_1400=3,this.CMD_SEL_1K_VROM_1800=4,this.CMD_SEL_1K_VROM_1C00=5,this.CMD_SEL_ROM_PAGE1=6,this.CMD_SEL_ROM_PAGE2=7,this.command=null,this.prgAddressSelect=null,this.chrAddressSelect=null,this.pageNumber=null,this.irqCounter=null,this.irqLatchValue=null,this.irqEnable=null,this.prgAddressChanged=!1};_[4].prototype=new _[0];_[4].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}switch(t){case 32768:this.command=e&7;var i=e>>6&1;i!==this.prgAddressSelect&&(this.prgAddressChanged=!0),this.prgAddressSelect=i,this.chrAddressSelect=e>>7&1;break;case 32769:this.executeCommand(this.command,e);break;case 40960:(e&1)!=0?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING);break;case 40961:break;case 49152:this.irqCounter=e;break;case 49153:this.irqLatchValue=e;break;case 57344:this.irqEnable=0;break;case 57345:this.irqEnable=1;break}};_[4].prototype.executeCommand=function(t,e){switch(t){case this.CMD_SEL_2_1K_VROM_0000:this.chrAddressSelect===0?(this.load1kVromBank(e,0),this.load1kVromBank(e+1,1024)):(this.load1kVromBank(e,4096),this.load1kVromBank(e+1,5120));break;case this.CMD_SEL_2_1K_VROM_0800:this.chrAddressSelect===0?(this.load1kVromBank(e,2048),this.load1kVromBank(e+1,3072)):(this.load1kVromBank(e,6144),this.load1kVromBank(e+1,7168));break;case this.CMD_SEL_1K_VROM_1000:this.chrAddressSelect===0?this.load1kVromBank(e,4096):this.load1kVromBank(e,0);break;case this.CMD_SEL_1K_VROM_1400:this.chrAddressSelect===0?this.load1kVromBank(e,5120):this.load1kVromBank(e,1024);break;case this.CMD_SEL_1K_VROM_1800:this.chrAddressSelect===0?this.load1kVromBank(e,6144):this.load1kVromBank(e,2048);break;case this.CMD_SEL_1K_VROM_1C00:this.chrAddressSelect===0?this.load1kVromBank(e,7168):this.load1kVromBank(e,3072);break;case this.CMD_SEL_ROM_PAGE1:this.prgAddressChanged&&(this.prgAddressSelect===0?this.load8kRomBank((this.nes.rom.romCount-1)*2,49152):this.load8kRomBank((this.nes.rom.romCount-1)*2,32768),this.prgAddressChanged=!1),this.prgAddressSelect===0?this.load8kRomBank(e,32768):this.load8kRomBank(e,49152);break;case this.CMD_SEL_ROM_PAGE2:this.load8kRomBank(e,40960),this.prgAddressChanged&&(this.prgAddressSelect===0?this.load8kRomBank((this.nes.rom.romCount-1)*2,49152):this.load8kRomBank((this.nes.rom.romCount-1)*2,32768),this.prgAddressChanged=!1)}};_[4].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC3: Invalid ROM! Unable to load.");this.load8kRomBank((this.nes.rom.romCount-1)*2,49152),this.load8kRomBank((this.nes.rom.romCount-1)*2+1,57344),this.load8kRomBank(0,32768),this.load8kRomBank(1,40960),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};_[4].prototype.clockIrqCounter=function(){this.irqEnable===1&&(this.irqCounter--,this.irqCounter<0&&(this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.irqCounter=this.irqLatchValue))};_[4].prototype.toJSON=function(){var t=_[0].prototype.toJSON.apply(this);return t.command=this.command,t.prgAddressSelect=this.prgAddressSelect,t.chrAddressSelect=this.chrAddressSelect,t.pageNumber=this.pageNumber,t.irqCounter=this.irqCounter,t.irqLatchValue=this.irqLatchValue,t.irqEnable=this.irqEnable,t.prgAddressChanged=this.prgAddressChanged,t};_[4].prototype.fromJSON=function(t){_[0].prototype.fromJSON.apply(this,arguments),this.command=t.command,this.prgAddressSelect=t.prgAddressSelect,this.chrAddressSelect=t.chrAddressSelect,this.pageNumber=t.pageNumber,this.irqCounter=t.irqCounter,this.irqLatchValue=t.irqLatchValue,this.irqEnable=t.irqEnable,this.prgAddressChanged=t.prgAddressChanged};_[5]=function(t){this.nes=t};_[5].prototype=new _[0];_[5].prototype.write=function(t,e){t<32768?_[0].prototype.write.apply(this,arguments):this.load8kVromBank(e,0)};_[5].prototype.write=function(t,e){if(t<20480){_[0].prototype.write.apply(this,arguments);return}switch(t){case 20736:this.prg_size=e&3;break;case 20737:this.chr_size=e&3;break;case 20738:this.sram_we_a=e&3;break;case 20739:this.sram_we_b=e&3;break;case 20740:this.graphic_mode=e&3;break;case 20741:this.nametable_mode=e,this.nametable_type[0]=e&3,this.load1kVromBank(e&3,8192),e>>=2,this.nametable_type[1]=e&3,this.load1kVromBank(e&3,9216),e>>=2,this.nametable_type[2]=e&3,this.load1kVromBank(e&3,10240),e>>=2,this.nametable_type[3]=e&3,this.load1kVromBank(e&3,11264);break;case 20742:this.fill_chr=e;break;case 20743:this.fill_pal=e&3;break;case 20755:this.SetBank_SRAM(3,e&3);break;case 20756:case 20757:case 20758:case 20759:this.SetBank_CPU(t,e);break;case 20768:case 20769:case 20770:case 20771:case 20772:case 20773:case 20774:case 20775:this.chr_mode=0,this.chr_page[0][t&7]=e,this.SetBank_PPU();break;case 20776:case 20777:case 20778:case 20779:this.chr_mode=1,this.chr_page[1][(t&3)+0]=e,this.chr_page[1][(t&3)+4]=e,this.SetBank_PPU();break;case 20992:this.split_control=e;break;case 20993:this.split_scroll=e;break;case 20994:this.split_page=e&63;break;case 20995:this.irq_line=e,this.nes.cpu.ClearIRQ();break;case 20996:this.irq_enable=e,this.nes.cpu.ClearIRQ();break;case 20997:this.mult_a=e;break;case 20998:this.mult_b=e;break;default:t>=20480&&t<=20501?this.nes.papu.exWrite(t,e):t>=23552&&t<=24575?this.graphic_mode===2||this.graphic_mode!==3&&this.irq_status&64:t>=24576&&t<=32767&&this.sram_we_a===2&&this.sram_we_b===1;break}};_[5].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.load8kRomBank(this.nes.rom.romCount*2-1,32768),this.load8kRomBank(this.nes.rom.romCount*2-1,40960),this.load8kRomBank(this.nes.rom.romCount*2-1,49152),this.load8kRomBank(this.nes.rom.romCount*2-1,57344),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};_[7]=function(t){this.nes=t};_[7].prototype=new _[0];_[7].prototype.write=function(t,e){t<32768?_[0].prototype.write.apply(this,arguments):(this.load32kRomBank(e&7,32768),e&16?this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING2):this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING))};_[7].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("AOROM: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};_[11]=function(t){this.nes=t};_[11].prototype=new _[0];_[11].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}else{var i=(e&15)*2%this.nes.rom.romCount,s=((e&15)*2+1)%this.nes.rom.romCount;if(this.loadRomBank(i,32768),this.loadRomBank(s,49152),this.nes.rom.vromCount>0){var r=(e>>4)*2%this.nes.rom.vromCount;this.loadVromBank(r,0),this.loadVromBank(r+1,4096)}}};_[34]=function(t){this.nes=t};_[34].prototype=new _[0];_[34].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(e,32768)};_[38]=function(t){this.nes=t};_[38].prototype=new _[0];_[38].prototype.write=function(t,e){if(t<28672||t>32767){_[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(e&3,32768),this.load8kVromBank((e>>2&3)*2,0)};_[66]=function(t){this.nes=t};_[66].prototype=new _[0];_[66].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(e>>4&3,32768),this.load8kVromBank((e&3)*2,0)};_[94]=function(t){this.nes=t};_[94].prototype=new _[0];_[94].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}else this.loadRomBank(e>>2,32768)};_[94].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UN1ROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};_[140]=function(t){this.nes=t};_[140].prototype=new _[0];_[140].prototype.write=function(t,e){if(t<24576||t>32767){_[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(e>>4&3,32768),this.load8kVromBank((e&15)*2,0)};_[180]=function(t){this.nes=t};_[180].prototype=new _[0];_[180].prototype.write=function(t,e){if(t<32768){_[0].prototype.write.apply(this,arguments);return}else this.loadRomBank(e,49152)};_[180].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("Mapper 180: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};var Bo=_,Xr=Bo,Vo=Pr,Hr=function(t){this.nes=t,this.mapperName=new Array(92);for(var e=0;e<92;e++)this.mapperName[e]="Unknown Mapper";this.mapperName[0]="Direct Access",this.mapperName[1]="Nintendo MMC1",this.mapperName[2]="UNROM",this.mapperName[3]="CNROM",this.mapperName[4]="Nintendo MMC3",this.mapperName[5]="Nintendo MMC5",this.mapperName[6]="FFE F4xxx",this.mapperName[7]="AOROM",this.mapperName[8]="FFE F3xxx",this.mapperName[9]="Nintendo MMC2",this.mapperName[10]="Nintendo MMC4",this.mapperName[11]="Color Dreams Chip",this.mapperName[12]="FFE F6xxx",this.mapperName[15]="100-in-1 switch",this.mapperName[16]="Bandai chip",this.mapperName[17]="FFE F8xxx",this.mapperName[18]="Jaleco SS8806 chip",this.mapperName[19]="Namcot 106 chip",this.mapperName[20]="Famicom Disk System",this.mapperName[21]="Konami VRC4a",this.mapperName[22]="Konami VRC2a",this.mapperName[23]="Konami VRC2a",this.mapperName[24]="Konami VRC6",this.mapperName[25]="Konami VRC4b",this.mapperName[32]="Irem G-101 chip",this.mapperName[33]="Taito TC0190/TC0350",this.mapperName[34]="32kB ROM switch",this.mapperName[64]="Tengen RAMBO-1 chip",this.mapperName[65]="Irem H-3001 chip",this.mapperName[66]="GNROM switch",this.mapperName[67]="SunSoft3 chip",this.mapperName[68]="SunSoft4 chip",this.mapperName[69]="SunSoft5 FME-7 chip",this.mapperName[71]="Camerica chip",this.mapperName[78]="Irem 74HC161/32-based",this.mapperName[91]="Pirate HK-SF3 chip"};Hr.prototype={VERTICAL_MIRRORING:0,HORIZONTAL_MIRRORING:1,FOURSCREEN_MIRRORING:2,SINGLESCREEN_MIRRORING:3,SINGLESCREEN_MIRRORING2:4,SINGLESCREEN_MIRRORING3:5,SINGLESCREEN_MIRRORING4:6,CHRROM_MIRRORING:7,header:null,rom:null,vrom:null,vromTile:null,romCount:null,vromCount:null,mirroring:null,batteryRam:null,trainer:null,fourScreen:null,mapperType:null,valid:!1,load:function(t){var e,i,s;if(t.indexOf("NES")===-1)throw new Error("Not a valid NES ROM.");for(this.header=new Array(16),e=0;e<16;e++)this.header[e]=t.charCodeAt(e)&255;this.romCount=this.header[4],this.vromCount=this.header[5]*2,this.mirroring=(this.header[6]&1)!=0?1:0,this.batteryRam=(this.header[6]&2)!=0,this.trainer=(this.header[6]&4)!=0,this.fourScreen=(this.header[6]&8)!=0,this.mapperType=this.header[6]>>4|this.header[7]&240;var r=!1;for(e=8;e<16;e++)if(this.header[e]!==0){r=!0;break}r&&(this.mapperType&=15),this.rom=new Array(this.romCount);var n=16;for(e=0;e<this.romCount;e++){for(this.rom[e]=new Array(16384),i=0;i<16384&&!(n+i>=t.length);i++)this.rom[e][i]=t.charCodeAt(n+i)&255;n+=16384}for(this.vrom=new Array(this.vromCount),e=0;e<this.vromCount;e++){for(this.vrom[e]=new Array(4096),i=0;i<4096&&!(n+i>=t.length);i++)this.vrom[e][i]=t.charCodeAt(n+i)&255;n+=4096}for(this.vromTile=new Array(this.vromCount),e=0;e<this.vromCount;e++)for(this.vromTile[e]=new Array(256),i=0;i<256;i++)this.vromTile[e][i]=new Vo;var o,h;for(s=0;s<this.vromCount;s++)for(e=0;e<4096;e++)o=e>>4,h=e%16,h<8?this.vromTile[s][o].setScanline(h,this.vrom[s][e],this.vrom[s][e+8]):this.vromTile[s][o].setScanline(h-8,this.vrom[s][e-8],this.vrom[s][e]);this.valid=!0},getMirroringType:function(){return this.fourScreen?this.FOURSCREEN_MIRRORING:this.mirroring===0?this.HORIZONTAL_MIRRORING:this.VERTICAL_MIRRORING},getMapperName:function(){return this.mapperType>=0&&this.mapperType<this.mapperName.length?this.mapperName[this.mapperType]:"Unknown Mapper, "+this.mapperType},mapperSupported:function(){return typeof Xr[this.mapperType]!="undefined"},createMapper:function(){if(this.mapperSupported())return new Xr[this.mapperType](this.nes);throw new Error("This ROM uses a mapper not supported by JSNES: "+this.getMapperName()+"("+this.mapperType+")")}};var Go=Hr,qo=Po,Yr=Tr,Xo=vo,Ho=ko,Yo=Go,Wr=function(t){if(this.opts={onFrame:function(){},onAudioSample:null,onStatusUpdate:function(){},onBatteryRamWrite:function(){},preferredFrameRate:60,emulateSound:!0,sampleRate:48e3},typeof t!="undefined"){var e;for(e in this.opts)typeof t[e]!="undefined"&&(this.opts[e]=t[e])}this.frameTime=1e3/this.opts.preferredFrameRate,this.ui={writeFrame:this.opts.onFrame,updateStatus:this.opts.onStatusUpdate},this.cpu=new qo(this),this.ppu=new Xo(this),this.papu=new Ho(this),this.mmap=null,this.controllers={1:new Yr,2:new Yr},this.ui.updateStatus("Ready to load a ROM."),this.frame=this.frame.bind(this),this.buttonDown=this.buttonDown.bind(this),this.buttonUp=this.buttonUp.bind(this),this.zapperMove=this.zapperMove.bind(this),this.zapperFireDown=this.zapperFireDown.bind(this),this.zapperFireUp=this.zapperFireUp.bind(this)};Wr.prototype={fpsFrameCount:0,romData:null,reset:function(){this.mmap!==null&&this.mmap.reset(),this.cpu.reset(),this.ppu.reset(),this.papu.reset(),this.lastFpsTime=null,this.fpsFrameCount=0},frame:function(){this.ppu.startFrame();var t=0,e=this.opts.emulateSound,i=this.cpu,s=this.ppu,r=this.papu;t:for(;;)for(i.cyclesToHalt===0?(t=i.emulate(),e&&r.clockFrameCounter(t),t*=3):i.cyclesToHalt>8?(t=24,e&&r.clockFrameCounter(8),i.cyclesToHalt-=8):(t=i.cyclesToHalt*3,e&&r.clockFrameCounter(i.cyclesToHalt),i.cyclesToHalt=0);t>0;t--){if(s.curX===s.spr0HitX&&s.f_spVisibility===1&&s.scanline-21===s.spr0HitY&&s.setStatusFlag(s.STATUS_SPRITE0HIT,!0),s.requestEndFrame&&(s.nmiCounter--,s.nmiCounter===0)){s.requestEndFrame=!1,s.startVBlank();break t}s.curX++,s.curX===341&&(s.curX=0,s.endScanline())}this.fpsFrameCount++},buttonDown:function(t,e){this.controllers[t].buttonDown(e)},buttonUp:function(t,e){this.controllers[t].buttonUp(e)},zapperMove:function(t,e){!this.mmap||(this.mmap.zapperX=t,this.mmap.zapperY=e)},zapperFireDown:function(){!this.mmap||(this.mmap.zapperFired=!0)},zapperFireUp:function(){!this.mmap||(this.mmap.zapperFired=!1)},getFPS:function(){var t=+new Date,e=null;return this.lastFpsTime&&(e=this.fpsFrameCount/((t-this.lastFpsTime)/1e3)),this.fpsFrameCount=0,this.lastFpsTime=t,e},reloadROM:function(){this.romData!==null&&this.loadROM(this.romData)},loadROM:function(t){this.rom=new Yo(this),this.rom.load(t),this.reset(),this.mmap=this.rom.createMapper(),this.mmap.loadROM(),this.ppu.setMirroring(this.rom.getMirroringType()),this.romData=t},setFramerate:function(t){this.opts.preferredFrameRate=t,this.frameTime=1e3/t,this.papu.setSampleRate(this.opts.sampleRate,!1)},toJSON:function(){return{romData:this.romData,cpu:this.cpu.toJSON(),mmap:this.mmap.toJSON(),ppu:this.ppu.toJSON()}},fromJSON:function(t){this.reset(),this.romData=t.romData,this.cpu.fromJSON(t.cpu),this.mmap.fromJSON(t.mmap),this.ppu.fromJSON(t.ppu)}};var Wo=Wr,Aa={Controller:Tr,NES:Wo};function Zi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ur(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function ji(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ur(Object(i),!0).forEach(function(s){Zi(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ur(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}var Uo=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,r){if(typeof document!="undefined"){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");if(o.async=!0,o.src=e,o.defer=i.defer,i.preconnectOrigin){var h=document.createElement("link");h.href=i.preconnectOrigin,h.rel="preconnect",n.appendChild(h)}n.appendChild(o),o.onload=s,o.onerror=r}})},Zo=function t(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];if(!s.length)return e;var n=s.shift();if(!(!ne(e)||!ne(n))){for(var o in n)ne(n[o])?(e[o]||Object.assign(e,Zi({},o,{})),t(e[o],n[o])):Object.assign(e,Zi({},o,n[o]));return t.apply(void 0,[e].concat(s))}},_e=function(){return!(typeof window=="undefined"||typeof document=="undefined")},Zr=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;_e()},jo=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zr('Missing "appName" property inside the plugin options.',e.app_name==null),Zr('Missing "name" property in the route.',e.screen_name==null),e};function Ko(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=t.split("/"),s=e.split("/");return i[0]===""&&e[e.length-1]==="/"&&i.shift(),s.join("/")+i.join("/")}var zo=function(){return{bootstrap:!0,onReady:null,onError:null,onBeforeTrack:null,onAfterTrack:null,pageTrackerTemplate:null,customResourceURL:"https://www.googletagmanager.com/gtag/js",customPreconnectOrigin:"https://www.googletagmanager.com",deferScriptLoad:!1,pageTrackerExcludedRoutes:[],pageTrackerEnabled:!0,enabled:!0,disableScriptLoad:!1,pageTrackerScreenviewEnabled:!1,appName:null,pageTrackerUseFullPath:!1,pageTrackerPrependBase:!0,pageTrackerSkipSamePath:!0,globalDataLayerName:"dataLayer",globalObjectName:"gtag",defaultGroupName:"default",includes:null,config:{id:null,params:{send_page_view:!1}}}},jr={},Jo=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=zo();jr=Zo(i,e)},rt=function(){return jr},Bt=function(){var t,e=rt(),i=e.globalObjectName;!_e()||typeof window[i]=="undefined"||(t=window)[i].apply(t,arguments)},Ki=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var s=rt(),r=s.config,n=s.includes;Bt.apply(void 0,["config",r.id].concat(e)),Array.isArray(n)&&n.forEach(function(o){Bt.apply(void 0,["config",o.id].concat(e))})},Kr=function(e,i){!_e()||(window["ga-disable-".concat(e)]=i)},zr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=rt(),i=e.config,s=e.includes;Kr(i.id,t),Array.isArray(s)&&s.forEach(function(r){return Kr(r.id,t)})},Jr=function(){zr(!0)},$o=function(){zr(!1)},$r,Qo=function(e){$r=e},zi=function(){return $r},Vt=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=rt(),s=i.includes,r=i.defaultGroupName;e.send_to==null&&Array.isArray(s)&&s.length&&(e.send_to=s.map(function(n){return n.id}).concat(r)),Bt("event",t,e)},Qr=function(t){if(!!_e()){var e;if(typeof t=="string")e={page_path:t};else if(t.path||t.fullPath){var i=rt(),s=i.pageTrackerUseFullPath,r=i.pageTrackerPrependBase,n=zi(),o=n&&n.options.base,h=s?t.fullPath:t.path;e=ji(ji({},t.name&&{page_title:t.name}),{},{page_path:r?Ko(h,o):h})}else e=t;e.page_location==null&&(e.page_location=window.location.href),e.send_page_view==null&&(e.send_page_view=!0),Vt("page_view",e)}},tn=function(t){var e=rt(),i=e.appName;if(!!t){var s;typeof t=="string"?s={screen_name:t}:s=t,s.app_name=s.app_name||i,Vt("screen_view",s)}},ta=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Vt.apply(void 0,["exception"].concat(e))},ea=function(t){Ki("linker",t)},ia=function(t){Vt("timing_complete",t)},sa=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Bt.apply(void 0,["set"].concat(e))},ra=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Vt.apply(void 0,["refund"].concat(e))},na=function(t){Vt("purchase",t)},ha=function(t){Ki({custom_map:t})},oa=Object.freeze({__proto__:null,query:Bt,config:Ki,optOut:Jr,optIn:$o,pageview:Qr,screenview:tn,exception:ta,linker:ea,time:ia,set:sa,refund:ra,purchase:na,customMap:ha,event:Vt}),aa=function(e){e.config.globalProperties.$gtag=oa},la=function(){if(!!_e()){var t=rt(),e=t.enabled,i=t.globalObjectName,s=t.globalDataLayerName;return window[i]==null&&(window[s]=window[s]||[],window[i]=function(){window[s].push(arguments)}),window[i]("js",new Date),e||Jr(),window[i]}},en=function(e){return ji({send_page_view:!1},e)},sn=function(){var t=rt(),e=t.config,i=t.includes;Bt("config",e.id,en(e.params)),Array.isArray(i)&&i.forEach(function(s){Bt("config",s.id,en(s.params))})},rn=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=rt(),s=i.appName,r=i.pageTrackerTemplate,n=i.pageTrackerScreenviewEnabled,o=i.pageTrackerSkipSamePath;if(!(o&&t.path===e.path)){var h=t;if(O(r)?h=r(t,e):n&&(h=jo({app_name:s,screen_name:t.name})),n){tn(h);return}Qr(h)}},nn=function(e){var i=rt(),s=i.pageTrackerExcludedRoutes;return s.includes(e.path)||s.includes(e.name)},fa=function(){var t=rt(),e=t.onBeforeTrack,i=t.onAfterTrack,s=zi();s.isReady().then(function(){Vi().then(function(){var r=s.currentRoute;sn(),!nn(r.value)&&rn(r.value)}),s.afterEach(function(r,n){Vi().then(function(){nn(r)||(O(e)&&e(r,n),rn(r,n),O(i)&&i(r,n))})})})},ua=function(){var t=rt(),e=t.onReady,i=t.onError,s=t.globalObjectName,r=t.globalDataLayerName,n=t.config,o=t.customResourceURL,h=t.customPreconnectOrigin,f=t.deferScriptLoad,u=t.pageTrackerEnabled,R=t.disableScriptLoad,S=Boolean(u&&zi());if(la(),S?fa():sn(),!R)return Uo("".concat(o,"?id=").concat(n.id,"&l=").concat(r),{preconnectOrigin:h,defer:f}).then(function(){e&&e(window[s])}).catch(function(b){return i&&i(b),b})},ba=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;aa(e),Jo(i),Qo(s),rt().bootstrap&&ua()};export{xt as F,sr as a,da as b,Ra as c,pa as d,wt as e,Zh as f,Sa as g,ba as i,si as n,_a as o,xa as r,Aa as s,ca as t,ga as v,ma as w};
